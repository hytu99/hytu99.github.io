<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Maupassantä¸»é¢˜å¢åŠ è®¿é—®ç»Ÿè®¡</title>
      <link href="/revise-theme/"/>
      <url>/revise-theme/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸¤å¤©å‡†å¤‡å†™ç‚¹æ–°åšå®¢ï¼Œè¿˜æ²¡å¼€å§‹å†™åˆæ€»è§‰å¾—ä¹‹å‰çš„ä¸»é¢˜è™½ç„¶å¾ˆå¥½çœ‹ä¹Ÿå¾ˆç¬¦åˆæˆ‘çš„å®¡ç¾ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€ä¸¢ä¸¢â€œèŠ±é‡Œèƒ¡å“¨â€œï¼Œäºæ˜¯æ‰¾åˆ°äº†<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">Maupassant</a>è¿™ä¸ªç®€æ´ä¸€ç‚¹çš„ä¸»é¢˜ï¼Œæ„Ÿè§‰å¾ˆç¬¦åˆæˆ‘çš„æ°”è´¨ï¼ˆæœç„¶è¿˜æ˜¯å–œæ–°åŒæ—§ğŸ˜¹ï¼‰ã€‚</p><p>ä¸»é¢˜æœ¬èº«æ²¡æœ‰ç½‘ç«™æ€»çš„è®¿é—®é‡å’Œè®¿å®¢æ•°ç»Ÿè®¡ï¼Œäºæ˜¯å°±è‡ªå·±å‚è€ƒäº†<a href="https://github.com/tufu9441/maupassant-hexo/issues/173#issuecomment-249463230" target="_blank" rel="noopener">issue</a>ä¸­çš„è§£å†³æ–¹æ¡ˆç„¶ååˆå„ç§å°è¯•ï¼Œæœ€ç»ˆæˆåŠŸè·å¾—äº†è‡ªå·±æƒ³è¦çš„æ ·å­ï¼Œåœ¨è¿™é‡Œä¹Ÿè®°å½•ä¸€ä¸‹ï¼ˆè™½ç„¶æˆ‘çš„åšå®¢æ˜¯å†™ç»™è‡ªå·±çš„ï¼Œä½†å…¶å®è¿˜æ˜¯æƒ³çœ‹çœ‹æœ‰å¤šå°‘äººçœ‹è¿‡äº†æˆ‘çš„åšå®¢ğŸ¤£ï¼Œç›®å‰è®¿å®¢æ•°è²Œä¼¼50+ğŸ˜€ï¼‰ã€‚</p><h3 id="1-ä¿®æ”¹after-footer-pug"><a href="#1-ä¿®æ”¹after-footer-pug" class="headerlink" title="1. ä¿®æ”¹after_footer.pug"></a>1. ä¿®æ”¹after_footer.pug</h3><p>åœ¨<code>themes\maupassant\layout\_partial\after_footer.pug</code>é‡Œæ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> theme.busuanzi == <span class="literal">true</span></span><br><span class="line">  script(<span class="attribute">src</span>=<span class="string">'https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js'</span>, async)</span><br></pre></td></tr></tbody></table></figure><h3 id="2-ä¿®æ”¹foot-pug"><a href="#2-ä¿®æ”¹foot-pug" class="headerlink" title="2. ä¿®æ”¹foot.pug"></a>2. ä¿®æ”¹foot.pug</h3><p>åœ¨<code>themes\maupassant\layout\_partial\footer.pug</code>é‡Œæ·»åŠ æ•°æ®æ˜¾ç¤ºä»£ç ï¼Œå®Œæ•´å†…å®¹å¦‚ä¸‹ã€‚å‰é¢æåˆ°çš„å„ç§å°è¯•çš„ä¸»è¦åŸå› è¿˜æ˜¯ä¸ä¼šjadeè¯­è¨€ï¼Œæ‰€ä»¥åªèƒ½é æ¨¡ä»¿åˆ«äººçš„ä»£ç ç„¶åå„ç§å°è¯•ï¼Œå†æ¬¡ä½“ä¼šåˆ°äº†æœç´¢èƒ½åŠ›çš„é‡è¦æ€§ã€‚</p><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#footer</span></span><br><span class="line">  = 'Copyright Â© ' + date(Date.now(), 'YYYY') + ' '</span><br><span class="line">  a(href=url_for('.'), rel='nofollow')= config.title + '.'</span><br><span class="line">  <span class="string">|  Powered by</span></span><br><span class="line">  a(rel='nofollow', target='_blank', href='https://hexo.io')  Hexo.</span><br><span class="line">  a(rel='nofollow', target='_blank', href='https://github.com/tufu<span class="number">9441</span>/maupassant-hexo')  Theme</span><br><span class="line">  <span class="string">|  by</span></span><br><span class="line">  a(rel='nofollow', target='_blank', href='https://github.com/pagecho')  Cho.</span><br><span class="line">  if theme.busuanzi == true</span><br><span class="line">    span(style={'font-size':'14px'})<span class="meta">#busuanzi_container_site_pv</span></span><br><span class="line">      br</span><br><span class="line">      <span class="string">|  æœ¬ç«™æ€»è®¿é—®é‡  </span></span><br><span class="line">      span(rel='nofollow')<span class="meta">#busuanzi_value_site_pv</span></span><br><span class="line">      <span class="string">|  äººæ¬¡,</span></span><br><span class="line">    span(style={'font-size':'14px'})<span class="meta">#busuanzi_container_site_uv</span></span><br><span class="line">      <span class="string">|  è®¿å®¢æ•°  </span></span><br><span class="line">      span(rel='nofollow')<span class="meta">#busuanzi_value_site_uv</span></span><br><span class="line">      <span class="string">|  äºº.</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-å¼€å¯ä¸è’œå­è®¡æ•°"><a href="#3-å¼€å¯ä¸è’œå­è®¡æ•°" class="headerlink" title="3. å¼€å¯ä¸è’œå­è®¡æ•°"></a>3. å¼€å¯ä¸è’œå­è®¡æ•°</h3><p>åœ¨<code>themes\maupassant\ _config.yml</code>å¼€å¯ä¸è’œå­è®¡æ•°ï¼Œå³ä¿®æ”¹ä¸º<code>busuanzi: true</code>ã€‚</p><p>å®Œå·¥ï¼</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æœºå™¨å­¦ä¹ ç¬”è®°ã€‘4. Support Vector Machine &amp; Lagrange Duality</title>
      <link href="/ml-svm/"/>
      <url>/ml-svm/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†è‡ªåŒå­¦çš„ç¬”è®°</p></blockquote><h3 id="Support-Vector-Machine"><a href="#Support-Vector-Machine" class="headerlink" title="Support Vector Machine"></a>Support Vector Machine</h3><p>Training data: $ \{ (\mathbf{\mathbf{x}}_i, y ) \} _ {i=1} ^ n$,  $y_i \in \mathcal{C} = \{ -1, 1 \}$.</p><p>Aim: $f(\mathbf{\mathbf{x}}, \mathbf{w}, b) = b + \sum_{j=1}^d w_j x_j$, s.t. $y_i = \text{sign}(f(\mathbf{\mathbf{x}}_i, w, b))$</p><h4 id="SVM-for-linear-separable-data"><a href="#SVM-for-linear-separable-data" class="headerlink" title="SVM for linear separable data"></a>SVM for linear separable data</h4><p><strong>Definition:</strong> A training sample is linear separate if there exists $(\hat{\mathbf{w}}, \hat{b})$, s.t. $y_i = \text{sign}  (f(\mathbf{\mathbf{x}}_i, \hat{\mathbf{w}}, \hat{b}))$, $\forall i \in [n] = \{1, 2, \cdots, n \}$, which is equivalent to $y_i f(\mathbf{\mathbf{x}}_i, \hat{\mathbf{w}}, \hat{b}) &gt; 0$, $\forall i \in [n]$.</p><img src="svm_1.jpg" width="400" height="400" alt="SVMç¤ºæ„å›¾" align="center"><p>ç‚¹$\mathbf{\mathbf{x}}_i$åˆ°çº¿$ \langle {\bf w}, \mathbf{\mathbf{x}} \rangle + b = 0$çš„è·ç¦»$d(\mathbf{\mathbf{x}}_i;\mathbf{w},b) = \dfrac{y_i(\langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b)}{\Vert \mathbf{w} \Vert_2}$.</p><p>$$<br>\max \limits _ {\mathbf{w}, b} \min \limits _ {\mathbf{\mathbf{x}} _ i \in D} margin(\mathbf{w}, b, D) = \max \limits_{\mathbf{w}, b} \min \limits _ {\mathbf{\mathbf{x}} _ i \in D } d(\mathbf{\mathbf{x}} _ i) = \max \limits _ {\mathbf{w}, b} \min \limits _ {\mathbf{\mathbf{x}} _ i \in D}  \dfrac{y_i( \langle\mathbf{w}, \mathbf{\mathbf{x}} _ i \rangle+ b)}{\Vert \mathbf{w} \Vert _ 2}<br>$$</p><p><strong>Assumption 1:</strong> Training sample $D = \{ (\mathbf{\mathbf{x}}_i, y_i) \} $, is linear separable.</p><p><strong>Definition:</strong> </p><p>The geometric margin $\gamma_f (\mathbf{z})$ of a linear classifier $f({\bf \mathbf{x}},{\bf w}, b) = \langle {\bf w}, {\bf \mathbf{x}} \rangle + b$ at a point $\mathbf{z}$ is its sigmoid Euclidean Distance to the hyperplane $ \{ \mathbf{\mathbf{x}}  :   \langle {\bf w}, {\bf \mathbf{x}} \rangle + b = 0\}$.<br>$$<br>\gamma_f (\mathbf{z})= \dfrac{y_i(\langle \mathbf{w}, \mathbf{z}_i \rangle + b)}{\Vert \mathbf{w} \Vert_2}<br>$$</p><p>The geometric margin $\gamma_f$ of a linear classifier $f$ for sample $S = \{ {\bf \mathbf{x}}_1, \cdots, {\bf x_n} \}$ is the minimum margin over the points in the sample. </p><p>$$<br>\gamma_f = \min \limits_{i \in [n]} \gamma_f ({\bf \mathbf{x}}_i)<br>$$</p><h4 id="Maximum-Margin-Classifier"><a href="#Maximum-Margin-Classifier" class="headerlink" title="Maximum Margin Classifier"></a>Maximum Margin Classifier</h4><p>$$<br>\max \limits_ { {\bf w}, b} \gamma_f = \max \limits_ { {\bf w}, b} \left \{ \frac{1}{\Vert \mathbf{w} \Vert} \min \limits_{i \in [n] } y _ i( \langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b) \right \}<br>$$</p><p>å³</p><p>$$<br>\max \limits _ { {\bf w}, b} \frac{1}{\Vert {\bf w} \Vert},  \\<br>\text{s.t. } \min \limits _ {i \in [n]} y _ i( \langle \mathbf{w}, \mathbf{\mathbf{x}} _ i \rangle + b) = 1  \\<br>\Rightarrow y _ i( \langle \mathbf{w} , \mathbf{\mathbf{x}} _ i \rangle + b) \ge 1 \\<br>\Rightarrow \min \limits_{ {\bf w}, b} \frac{1}{2} \Vert {\bf w} \Vert ^ 2<br>$$</p><p>ç”¨åè¯æ³•å¯è¯ç­‰å·å¯ä»¥å–åˆ°ã€‚</p><p><strong>Definition:</strong> Given a SVM classifier $\langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b = 0$, the marginal hyperplanes are determined by $\vert \langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b \vert  = 1$. The support vectors are the data instance on the marginal hyperplanes. ï¼ˆ i.e. $ \{  {\bf \mathbf{x}}_i  : | \langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b \vert  = 1 , {\bf \mathbf{x}}_i \in S \} $ ï¼‰</p><h4 id="Not-separable"><a href="#Not-separable" class="headerlink" title="Not separable"></a>Not separable</h4><p>minimize $\frac{1}{2} \Vert {\bf w} \Vert ^ 2 + C(training \ errors)$</p><p>minimize  $\frac{1}{2} \Vert {\bf w} \Vert ^ 2 + C(distance \ of\ the \ error \  points \ and \ its \ correct \ position)$</p><p>SVM for non-separate cases:</p><p>$$<br>\min \limits _ { {\bf w}, b, \epsilon} \frac{1}{2} \Vert \mathbf{w} \Vert + C \sum _ {i=1} ^ {n} \epsilon_i, \\<br>\text{s.t. } y_i (\langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b) \ge 1 - \epsilon_i, i \in [n] \\  \epsilon_i \ge 0, i \in [n]<br>$$</p><h3 id="Lagrange-Duality"><a href="#Lagrange-Duality" class="headerlink" title="Lagrange Duality"></a>Lagrange Duality</h3><p>Consider the problem:</p><p>$$<br>\begin{align}<br>\min f(\mathbf{x}) \tag{1} \\<br>\text{s.t. } g_i(\mathbf{x}) &amp; \le 0, i = 1,\cdots,m \\<br>h_i(\mathbf{x}) &amp; = 0, i = 1,\cdots, p \\<br>\mathbf{x} &amp; \in X<br>\end{align}<br>$$</p><p>$f$, $g_i$, $h_i$ are all continously differentiable.</p><p>$$<br>g(\mathbf{x}) = \left [<br>\begin{matrix}<br>g_1(\mathbf{x}) \\<br>\vdots \\<br>g_m(\mathbf{x})<br>\end{matrix}<br>\right],<br>h(\mathbf{x}) = \left [<br>\begin{matrix}<br>h_1(\mathbf{x}) \\<br>\vdots \\<br>h_p(\mathbf{x})<br>\end{matrix}<br>\right]<br>$$</p><p>Feasible Set: $D = \{  \mathbf{x}  :  g(\mathbf{x}) \le 0 , h(\mathbf{x}) = 0, \mathbf{x} \in X \}$.</p><p>Each $\mathbf{x} \in D$ is called a feasible solution. The optimal function value is $f^* = \inf \limits _ { \mathbf{x} \in D } f(\mathbf{x})$.</p><hr><p>Transition from the domain to the image $S = \{ (g(\mathbf{x}), h(\mathbf{x}), f(\mathbf{x}))  :  \mathbf{x} \in X \}$ ï¼ˆ$\dim =m + p + 1 $ï¼‰</p><p><strong>Definition 1:</strong> Associated with the primal problem, we define the Lagrangian $L$: $\mathbb{R}^n \times \mathbb{R} ^ m \times \mathbb{R} ^ p \rightarrow \mathbb{R}$.<br>$$<br>L(\mathbf{\mathbf{x}}, \lambda, \mu) = f(\mathbf{\mathbf{x}}) + \sum _ {i = 1} ^ m \lambda_i g_i(\mathbf{\mathbf{x}}) + \sum _ {i = 1} ^ p \mu_i h_i(\mathbf{\mathbf{x}})<br>$$</p><p><strong>Definition 2:</strong> A vector $ ( \lambda ^ *, \mu ^ *) = (\lambda _ 1 ^ *, \cdots, \lambda_m ^ *, \mu_1 ^ *, \cdots, \mu_p ^ *)$  is said to be a geometric multiplier vectorï¼ˆor simply geometric multiplierï¼‰for the primal problem if:<br>$$<br>\lambda_i ^ * \ge 0, i = 1, \cdots, m \text{ and } f ^ * = \inf _ {\mathbf{x} \in X} L(\mathbf{\mathbf{x}}, \lambda ^ *, \mu ^ *)<br>$$</p><p><strong>Lemmaï¼ˆVisualization Lemmaï¼‰:</strong> </p><ol><li>The hyperplane with normal $(\lambda, \mu, 1)$ that pass through $(g(\mathbf{\mathbf{x}}), h(\mathbf{\mathbf{x}}), f(\mathbf{\mathbf{x}}))$ intercepts the vertical axis $\{ (\mathbf{0}, z), z \in \mathbb{R} \}$ at the level $L(\mathbf{\mathbf{x}}, \lambda, \mu)$.</li><li>Among all hyperplanes with normal $(\lambda, \mu, 1)$ that contains in their positive half space the set $S$, the highest attained level of interception of the vertical axis is $\inf \limits_ {\mathbf{x} \in X} L(\mathbf{\mathbf{x}}, \lambda, \mu)$.</li></ol><p><strong>Proposition:</strong> Let $(\lambda ^ *, \mu ^ *)$ be a geometric multiplier. Then $\mathbf{\mathbf{x}} ^ *$ is a global minimum of the primal problem iff $\mathbf{\mathbf{x}} ^ * \in \arg \min \limits _ {\mathbf{\mathbf{x}} \in X} L(\mathbf{\mathbf{x}}, \lambda ^ *, \mu ^ *)$, $ \lambda _ i ^ * g _ i(\mathbf{\mathbf{x}} ^ *) = 0$, $  i = 1, \cdots, m$ï¼ˆcomplementary slacknessï¼‰.</p><p><strong>Proof:</strong></p><p>ï¼ˆ$\Rightarrow$ï¼‰</p><p>Suppose $\mathbf{x} ^ *$ is a global minimum. Then $\mathbf{x} ^ *$ must be feasible, and thus</p><p>$$<br>f(\mathbf{x} ^ *) \ge L(\mathbf{x} ^ *, \lambda ^ *, \mu ^ *) \ge f ^ * = f(\mathbf{x} ^ *) + \sum _ {i = 1} ^ m \lambda_i g _ i(\mathbf{x} ^ *) + \sum _ {i = 1} ^ p \mu_i h _ i(\mathbf{x} ^ *)<br>$$</p><p>The definition of $ f  ^ * $ leads to $ f ^ * = f(\mathbf{x} ^ * )  $, which implies that </p><p>$$<br>f ( \mathbf{x} ^ * ) = L (\mathbf{x} ^ * ) = f ^ *  = \inf \limits  _ {\mathbf{x} \in \mathcal{X} } L (\mathbf{x}, \lambda ^ *, \mu ^ *) \\<br>\Rightarrow \mathbf{x} ^ * = \arg \min \limits _ {\mathbf{x} \in X} L(\mathbf{x}, \lambda ^ *, \mu ^ *) \text{ and } f ( \mathbf{x} ^ *) = L(\mathbf{x} ^ *) = f(\mathbf{x} ^ *) + \sum _ {i = 1} ^ m \lambda_i g _ i(\mathbf{x} ^ *) + \sum _ {i = 1} ^ p \mu_i h _ i(\mathbf{x} ^ *) \\<br>\Rightarrow \lambda _ i ^ * g _ i(\mathbf{x} ^ *) = 0<br>$$</p><p>ï¼ˆ$\Leftarrow$ï¼‰<br>$$<br>f (\mathbf{x} ^ * ) = L(\mathbf{x} ^ *, \lambda ^ *, \mu ^ *) \le L(\mathbf{x} , \lambda ^ *, \mu ^ *) =  f(\mathbf{x}) + \sum _ {i = 1} ^ m \lambda_i g _ i(\mathbf{x} ^ *) + \sum _ {i = 1} ^ p \mu_i h _ i(\mathbf{x} ^ *) \le f(\mathbf{x})<br>$$</p><p><strong>Lagrange Duality:</strong></p><p>Lagrange Dual Function: $ q(\lambda, \mu) = \inf \limits_ {\mathbf{x} \in X} L (\mathbf{x}, \lambda, \mu)$.</p><p>Lagrange Dual Problem: $\max q(\lambda, \mu)$, s.t. $\lambda \ge 0$.</p><p>Dual optimal value: $q ^ * = \sup \limits _ { \{ (\lambda, \mu)  :  \lambda \ge 0 \} } q (\lambda, \mu)$</p><p>$\text{dom } q = \{ (\lambda, \mu)  :  q(\lambda, \mu) &gt; - \infty \}$</p><p><strong>convex:</strong></p><ol><li>$\text{dom } q \cap \{ (\lambda, \mu)  :  \lambda \ge 0 \} $ is convex.</li><li>$-q$ is convex. ï¼ˆ$f(\mathbf{x}) = \sup \limits_ {y \in \cal{Y}}l(\mathbf{x},y)$, $l(\mathbf{x},y)$ is convex $\Rightarrow f(\mathbf{x})$ is convexï¼‰</li></ol><p><strong>Theoremï¼ˆWeek Duality Theoremï¼‰:</strong> $q ^ * \le f ^ *$</p><p><strong>Proof:</strong> $\forall (\lambda, \mu), q(\lambda, \mu) = \inf \limits _ {\mathbf{x} \in X} L(\mathbf{x}, \lambda, \mu) \le \inf \limits _ {\mathbf{x} \in D} L(\mathbf{x}, \lambda, \mu) \le f ^ *$</p><hr><p><strong>Definition:</strong> Consider $f: X \rightarrow Y$</p><ol><li><p>The value $f(x) \in Y$ that it assumes at element $ x  \in X$ is called the image of $x$.</p></li><li><p>The image of a set $A \subset X$ under the mapping $f$ is $f(A) = \{ y \in Y  :  \exists x \in A, \text{s.t. } f(x) = y  \}$.</p></li><li><p>The preimage of as set $B \subset Y$ is $f ^ {-1} (B) := \{ x \in X : f(x) \in B \}$</p><p>eg: $f(X) = \det (A)$, $f(x ^ 2) = 2 x $ .</p></li></ol><p><strong>Definition:</strong> A hyperplane $H$ in $ \mathbb{R} ^ {d +1}$ is specified by a linear equation involving a nonzero vector $(\mathbf{u}, u_0)$ ï¼ˆcalled the normal vector of $H$ï¼‰, where $\mathbf{u} \in  \mathbb{R} ^ d$ and $u_0 \in \mathbb{R}$ and by a constraint $C$ as follows:<br>$$<br>H = \{ ({\bf w}, z) : {\bf w} \in \mathbb{R} ^ d, z \in \mathbb{R}, u_0 z + \langle \mathbf{u}, \mathbf{w} \rangle = C \}<br>$$</p><p>Hyperplane defines two half-spaces: the positive half-space $H ^ + = \{ ({\bf w}, z) : {\bf w} \in \mathbb{R} ^ d, z \in \mathbb{R}, u_0 z + \langle \mathbf{u}, \mathbf{w} \rangle \ge  C \}$ and the negative half-space $H ^ + = \{ ({\bf w}, z) : {\bf w} \in \mathbb{R} ^ d, z \in \mathbb{R}, u_0 z + \langle \mathbf{u}, \mathbf{w} \rangle \le  C \}$.</p><p>$$<br>l({\bf w}, z) = u_0 z +  \langle \mathbf{u}, \mathbf{w} \rangle  \\<br>$$</p><p><img src="pic2.jpg" alt=""></p><p><strong>Definition:</strong> Duality gap is $f ^ * - q ^ *$.</p><p><strong>Proposition:</strong> </p><ol><li><p>If there is no duality gap, the set of geometric multipliers is equal to the set of optimal dual solution.</p></li><li><p>If there is duality gap, the set of geometric multipliers is empty.</p></li></ol><p><strong>Optimality conditions:</strong> </p><p>A pair $\mathbf{\mathbf{x}} ^ * $ and $  ( \lambda ^ * , \mu ^ * ) $ is an optimal solution and geometric multiplier iff </p><p>$$<br>\mathbf{x} ^ * \in X, g(\mathbf{x} ^ *) \le 0, h(\mathbf{x} ^ * ) = 0. \text{(Primal Feasibility)} \\<br>\lambda ^ * \ge 0  \text{(Dual Feasibility)} \\<br>\mathbf{x} ^ * \in \arg \min \limits_ {\mathbf{x} \in X} L(\mathbf{x}, \lambda ^ *, \mu ^ *) \text{(Lagrangian Optimality )} \\<br>\lambda _ i ^ * g _ i ^ * (\mathbf{x}) = 0, i = 1,\cdots,m \text{(Complementary Slackness)}<br>$$</p><p><strong>Saddle Point Theorem:</strong></p><p>A pair $\mathbf{\mathbf{x}} ^ * $ and $  ( \lambda ^ * , \mu ^ * ) $ is an optimal solution and geometric multiplier iff $\mathbf{\mathbf{x}} ^ * \in X$, $\lambda ^ * \ge 0$ and $(\mathbf{\mathbf{x}} ^ *, \lambda ^ *, \mu ^ * ) $ is a saddle point of the Lagrangian. i.e.</p><p>$$<br>L((\mathbf{\mathbf{x}} ^ *, \lambda, \mu) \le L(\mathbf{\mathbf{x}} ^ *, \lambda ^ *, \mu ^ * ) \le (\mathbf{\mathbf{x}}, \lambda ^ *, \mu ^ * ) ), \forall \mathbf{\mathbf{x}} \in X, \lambda \ge 0<br>$$</p><p><strong>Strong Duality Theorem:</strong></p><p>Consider the primal problem. Suppose that $f$ is convex , $X$ is a polyhedral, i.e. $X = \{ {\bf \mathbf{x}}:  \langle {\bf a} _ i, {\bf \mathbf{x}} \rangle  \le b, i = 1, \cdots, r \} $, $g_i$ and $h_i$ are linear and $f ^ * $ is finite. Then there is no duality gap and there exists at least one geometric multiplier ï¼ˆprimal and dual problems have optimal solutionsï¼‰.</p><h3 id="SVM-amp-SVM-Dual"><a href="#SVM-amp-SVM-Dual" class="headerlink" title="SVM &amp; SVM Dual"></a>SVM &amp; SVM Dual</h3><p><strong>SVM:</strong></p><p>$$<br>\min _ {\mathbf{w}, b} \frac{1}{2} \Vert {\bf w} \Vert ^ 2 + C \sum _ {i = 1} ^ n \epsilon_i \\<br>\text{s.t. } y_i ( \langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b) \ge 1 - \epsilon_i, i = 1, \cdots, n \\<br>\epsilon_i \ge 0, i = 1, \cdots, n<br>$$</p><p>$$<br>L(\mathbf{w}, b, \epsilon, \alpha, u) = \frac{1}{2} \Vert \mathbf{w} \Vert ^ 2 + C \sum _ {i = 1} ^ n \epsilon_i + \sum _ {i = 1} ^ n \alpha _ i (1 - \epsilon _ i - y_i ( \langle \mathbf{w}, x_i \rangle + b) ) - \sum _ {i = 1} ^ n u_i \epsilon_i, \alpha \ge 0, u \ge 0<br>$$</p><p>$$<br>\begin{align}<br>q(a, u)  = &amp; \inf _ {\mathbf{w}, b, \epsilon} L(b, \epsilon, \alpha, u) \\<br>= &amp; \inf _ {\mathbf{w}} \frac{1}{2} \Vert {\bf w} \Vert ^ 2 - \sum _ {i = 1} ^ n \alpha _ i  y_i \langle \mathbf{w},  \mathbf{\mathbf{x}}_i \rangle  \\ &amp; + \inf _ {b}  b  \sum _ {i = 1} ^ n  \alpha _ i y _ i \\ &amp; + \inf _ {\epsilon} \sum _ {i = 1} ^ n (C - \alpha _ i - u _ i) \epsilon_i<br>\end{align}<br>$$</p><p>$$<br>\begin{align}<br>\left. \nabla_\mathbf{w} L(\mathbf{w}, b, \epsilon, \alpha, u)  \right| _ {\mathbf{w} = \mathbf{\hat{w}}} = 0 &amp; \Rightarrow \mathbf{\hat{w}} - \sum _ {i = 1} ^ n \alpha _ i y _i \mathbf{\mathbf{x}} _ i - 0 \\<br>\left. \nabla_b L(\mathbf{w}, b, \epsilon, \alpha, u)  \right| _ {b = \hat{b}} = 0 &amp; \Rightarrow - \sum _ {i = 1} ^ n \alpha_i y _i = 0 \\<br>\left. \nabla_\epsilon L(\mathbf{w}, b, \epsilon, \alpha, u)  \right| _ {\epsilon = \hat{\epsilon}} = 0 &amp; \Rightarrow C - \alpha_i - u _ i = 0<br>\end{align}<br>$$</p><p>$$<br>\max q(\alpha, u) = - \frac{1}{2} \sum _ {i =1} ^ n \sum _ {j = 1} ^ n \alpha_i \alpha_j y_i y _ j \langle {\bf \mathbf{x}} _ i, {\bf \mathbf{x}} _ j \rangle + \sum _ {i = 1} ^ n \alpha _ i \\<br>\text{s.t. }  \sum _ {i = 1} ^ n \alpha_i y _i = 0 , \alpha _ i \ge 0 \\<br> C - \alpha_i - u _ i = 0, u_i \ge 0<br>$$</p><p><strong>SVM Dual:</strong></p><p>$$<br>\max q(\alpha)<br>\text{s.t. } \sum _ {i = 1} ^ n \alpha _ i y _ i = 0 \\<br>\alpha _ i \in [0, C], i = 1, \cdots, n<br>$$</p><p><strong>Proposition:</strong></p><p>Let $\alpha ^ * $ be one of the dual optimal solutions.</p><p>$$<br>\mathbf{w} ^ * = \sum _ {i = 1} ^ n \alpha _ i ^ * y _ i \mathbf{\mathbf{x}} _ i \\<br> \alpha _ i (1 - \epsilon _ i - y_i ( \langle \mathbf{w}, \mathbf{\mathbf{x}}_i \rangle + b) ) = 0, \forall i \text{(Complementary Slackness)}<br>$$</p><p>$ \alpha _ k ^ * $ is one of the entries of $\alpha ^ *$ and $ \alpha _ k ^ * \in (0, C) $, then:</p><p>$$<br>(1 - \epsilon _ i - y_i ( \langle \mathbf{w}, x_i \rangle + b) ) = 0 \\<br>\alpha _ k ^ * \in (0, C) \Rightarrow u_k ^ * \in (0, C) \Rightarrow \epsilon _ k ^ * = 0 \\<br>b ^ * = y _ k - \langle {\bf w} ^ *, {\bf \mathbf{x} _ k} \rangle<br>$$</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æœºå™¨å­¦ä¹ ç¬”è®°ã€‘3. Naive Bayes &amp; Logistic Regression</title>
      <link href="/ml-naive-bayes/"/>
      <url>/ml-naive-bayes/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†è‡ªåŒå­¦çš„ç¬”è®°ã€‚<br>ç›‘ç£å­¦ä¹ æ˜¯æŒ‡æœ‰ç›®æ ‡å˜é‡æˆ–é¢„æµ‹ç›®æ ‡çš„æœºå™¨å­¦ä¹ æ–¹æ³•ï¼ŒåŒ…æ‹¬åˆ†ç±»å’Œå›å½’ã€‚</p></blockquote><h3 id="åˆ†ç±»ä¸­çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•ï¼ˆNaive-Bayes-Classifier"><a href="#åˆ†ç±»ä¸­çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•ï¼ˆNaive-Bayes-Classifier" class="headerlink" title="åˆ†ç±»ä¸­çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•ï¼ˆNaive Bayes Classifier)"></a>åˆ†ç±»ä¸­çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•ï¼ˆNaive Bayes Classifier)</h3><p>ä»¥åƒåœ¾é‚®ä»¶çš„åˆ†ç±»ï¼ˆSpan Detecorï¼‰ä¸ºä¾‹ã€‚</p><h4 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><p>å¯¹äºè®­ç»ƒè¿‡çš„æ¨¡å‹ï¼Œç»™å®š${\bf x}$ï¼Œç»™å‡º$P(spam|{\bf x})$ã€‚</p><p>è®­ç»ƒæ•°æ®è®°ä½œ$ \{ \mathbf{x} _ i,   y _ i \} $ï¼Œ $y_i \in {\mathcal C} = \{spam, not \_ spam \} $ã€‚</p><p>eg: spam email: laptop with the lowest price.</p><h4 id="åŸºæœ¬å‡è®¾"><a href="#åŸºæœ¬å‡è®¾" class="headerlink" title="åŸºæœ¬å‡è®¾"></a>åŸºæœ¬å‡è®¾</h4><ol><li><p>å±æ€§å€¼$x_i$æ¡ä»¶ç‹¬ç«‹äºæ ‡ç­¾å€¼ï¼Œå³<br>$$<br>P(x_1, x_2, \cdots ,x_{| \cal{X} |}|{\mathcal C}) = \prod_i P(x_i | {\mathcal C })<br>$$</p><p>ä»¥åƒåœ¾é‚®ä»¶åˆ†ç±»ä¸ºä¾‹ï¼Œè¯¥é—®é¢˜ä¸­çš„æ ·æœ¬${\bf x}_i$ ä¸ºè¡¨å¾é‚®ä»¶å±æ€§çš„çŸ¢é‡ï¼ˆæ¯”å¦‚è¯å‘é‡ï¼‰ï¼Œè¡¨ç¤ºé‚®ä»¶çš„æ•´ä½“ç‰¹å¾ã€‚å¦‚æœä¸è€ƒè™‘è¿™ä¸€å‡è®¾ï¼Œåœ¨é€šå¸¸çš„é‡‡æ ·ä¸­å¯¹$P({\bf x}|c)$çš„ä¼°è®¡å¾€å¾€ä¼šå¯¼å‡ºå¾ˆå°çš„å€¼ï¼ˆä¸å®¹æ˜“æ‰¾åˆ°ä¸¤å°ä¸€æ ·çš„é‚®ä»¶ï¼‰ã€‚</p><p>è€Œè¿™ä¸€å‡è®¾ä¸ºæˆ‘ä»¬å¸¦æ¥çš„å¥½å¤„åˆ™æ˜¯æ‘†è„±äº†å±æ€§æ†ç»‘çš„æ¡æ¢ï¼Œå°†å•ä¸ªå±æ€§ä½œä¸ºç»Ÿè®¡ä¸æ¦‚ç‡ä¼°è®¡çš„åŸå­å•ä½ï¼Œæ—¢æé«˜äº†å¯¹æ•°æ®çš„åˆ©ç”¨ç‡ä¹Ÿæœ‰æ•ˆåœ°é™ä½äº†æ¨¡å‹éœ€è¦çš„å‚æ•°æ•°ç›®ã€‚å½“ç„¶è¿™ä»¥çœŸå®æ€§ä¸ºä»£ä»·ã€‚</p></li><li><p>å±æ€§å€¼çš„åˆ†å¸ƒç‹¬ç«‹äºå…¶å‡ºç°çš„ä½ç½®ï¼š</p><p>$$<br>P(x_i = w_k|c) = P(x_j=w_k|c),\forall i\not=j<br>$$</p><p>äº¦å³ï¼š</p><p>$$<br>P(x_i = w_k|c) = P(w_k|c),\forall i<br>$$</p><p>è¿™ä¸€æ¡ä»¶æ˜¯æˆ‘ä»¬è„±ç¦»äº†å¯¹é‚®ä»¶é•¿åº¦ä¸ä½ç½®çš„ä¾èµ–ï¼Œä¼°è®¡ä¸­æˆ‘ä»¬å°±åªéœ€è¦è€ƒè™‘è¯é¢‘ï¼Œè¿›ä¸€æ­¥é™ä½äº†ä¼°è®¡å‚æ•°çš„æ•°ç›®å’Œå¤æ‚åº¦ã€‚</p></li></ol><h4 id="ç†è®ºä¾æ®ï¼ˆè´å¶æ–¯å®šç†ï¼‰"><a href="#ç†è®ºä¾æ®ï¼ˆè´å¶æ–¯å®šç†ï¼‰" class="headerlink" title="ç†è®ºä¾æ®ï¼ˆè´å¶æ–¯å®šç†ï¼‰"></a>ç†è®ºä¾æ®ï¼ˆè´å¶æ–¯å®šç†ï¼‰</h4><p>$$<br>\begin{align}<br>{\hat y} &amp;= \arg \max _ {c \in {\mathcal C} } P(c | {\bf x} ) \\<br>&amp;= \arg \max _ {c \in {\mathcal C} } \frac{P({\bf x}|c) P(c) } {P({\bf x} ) } \\<br>&amp;= \arg \max _ {c \in {\mathcal C} } P({\bf x}|c)P(c) \\<br>&amp;= \arg \max _ {c \in {\mathcal C} } P(c) \prod_i P(x_i | c)  \ (assumption \ 1)  \\<br>&amp;= \arg \max _ {c \in {\mathcal C} } P(c) \prod_k P(w_k|c) ^ {t _ k} \ (assumption \ 2) \\<br>\end{align}<br>$$</p><p>å…¶ä¸­çš„$P(c)$ä¸ºå…ˆéªŒæ¦‚ç‡ï¼Œä»é‡‡æ ·æ•°æ®ä¸­ä¼°è®¡ã€‚ä½¿å…ˆéªŒæ¦‚ç‡æ›´æ¥è¿‘çœŸå®åˆ†å¸ƒè¿™ä¸€ç‚¹å¯¹é‡‡æ ·çš„å¤šæ ·æ€§æå‡ºäº†ä¸€å®šçš„è¦æ±‚ã€‚</p><p>æœ€åçš„$P(w _ k|c)$å¯ä»¥ç”¨è¡¨ç¤º$P(w_k|c) = \dfrac{n_{ck}}{n_c}$,å…¶ä¸­$n_c=\sum_{i : y=c} | x _ i| $è¡¨ç¤ºcç±»å‡ºç°çš„æ¬¡æ•°ï¼Œ$n_{ck}$è¡¨ç¤ºcç±»ä¸­è¯$w_k$å‡ºç°çš„æ¬¡æ•°ã€‚ä½†æ˜¯æ³¨æ„åˆ°å¦‚æœåœ¨é‡‡æ ·ä¸­åªè¦æœ‰$n_{c k}=0$,é‚£åœ¨ä¼°è®¡ä¸­å°±ä¸€å®šä¼šæœ‰$P(w_k|c)=0$,è¿™åœ¨å®é™…ä¸­å¹¶ä¸æ˜¯åˆç†çš„ã€‚ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæœ‰ä¸€ç§æ–¹æ¡ˆæ˜¯Laplace Smoothing:</p><p>$$<br>P(w_k|c) = \frac{n_{c k} + 1} {n _ c + | \mathcal{V} | }<br>$$</p><h4 id="æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è®­ç»ƒï¼ˆTraining-Naive-Bayes-Classifierï¼‰"><a href="#æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è®­ç»ƒï¼ˆTraining-Naive-Bayes-Classifierï¼‰" class="headerlink" title="æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è®­ç»ƒï¼ˆTraining Naive Bayes Classifierï¼‰"></a>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è®­ç»ƒï¼ˆTraining Naive Bayes Classifierï¼‰</h4><p>$$<br>\begin{align}<br>&amp;\text{Input: trainning samples } {\mathcal D} = \{ ({\bf x_i},y_i) \} \\<br>&amp; {\mathcal V} \leftarrow \text{the set of distinct words and other tokens in }  {\mathcal D} \\<br>&amp; \text{for each target value } c \in {\mathcal C}, \text{ do} \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~  {\mathcal D_c} \leftarrow \text{the training samples whose labels are c} \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ P(c) \leftarrow \dfrac{|{\mathcal D_c}|}{|{\mathcal D}|} \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ T_c \leftarrow \text{a single document by concentrating all training samples in } \mathcal{D} _ c \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ n_c \leftarrow |T_c| \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ \text{for } w_k \in \cal{V} \text{ do} \\<br>&amp;  ~ ~ ~ ~ ~ ~ ~ ~  ~ ~ ~ ~ ~ ~ ~ ~ n_{ck} \leftarrow  \text{the number of times the word } w_k  \text{ occurs in } T_c \\<br>&amp;  ~ ~ ~ ~ ~ ~ ~ ~  ~ ~ ~ ~ ~ ~ ~ ~ P(w_k|c) = \dfrac{n _ {ck} + 1}{n_c+ | \mathcal{V} | } \\<br>&amp;  ~ ~ ~ ~ ~ ~ ~ ~ \text{endfor} \\<br>&amp; \text{endfor}<br>\end{align}<br>$$</p><p>æ‰€è°“è®­ç»ƒï¼Œå°±æ˜¯è®¡ç®—$P(w_k|c)$çš„è¡¨ç½¢äº†ã€‚</p><h4 id="æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨æµ‹è¯•ï¼ˆTesting-Naive-Bayes-Classifierï¼‰"><a href="#æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨æµ‹è¯•ï¼ˆTesting-Naive-Bayes-Classifierï¼‰" class="headerlink" title="æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨æµ‹è¯•ï¼ˆTesting Naive Bayes Classifierï¼‰"></a>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨æµ‹è¯•ï¼ˆTesting Naive Bayes Classifierï¼‰</h4><p>$$<br>\begin{align}<br>&amp; \text{Input: A new sample } {\bf x}, \text{ è®¾} x_i \text{æ˜¯} {\bf x}  \text{çš„ç¬¬ i ä¸ªå±æ€§}, I = \emptyset \\<br>&amp; \text{for } x_1, \cdots, x_i \text{ do} \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ \text{if } \exists w_k \in \mathcal{V} \text{ such that } w_k = x_i, \text{ then} \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ I \leftarrow I \cup k \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ \text{end if} \\<br>&amp; \text{end for} \\<br>&amp; \text{predict the label of } \mathbf{x} \text{ by } \hat y= \arg \max_{c \in {\mathcal C}}P(c) \prod _ { i \in I} P(w_i|c)<br>\end{align}<br>$$</p><p>è¿™ä¸ªç®—æ³•è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å¥½ç”¨ã€‚</p><h4 id="ç®—æ³•æ€§èƒ½çš„è¡¡é‡æŒ‡æ ‡"><a href="#ç®—æ³•æ€§èƒ½çš„è¡¡é‡æŒ‡æ ‡" class="headerlink" title="ç®—æ³•æ€§èƒ½çš„è¡¡é‡æŒ‡æ ‡"></a>ç®—æ³•æ€§èƒ½çš„è¡¡é‡æŒ‡æ ‡</h4><ol><li><p>å‡†ç¡®ç‡ï¼ˆAccuracy)<br>$$<br>\text{Accuracy} = \frac{\text{ # correctly predicted samples} } {\text{ # total samples} }<br>$$<br>è¿™ä¸ªæŒ‡æ ‡å¹¶ä¸é€‚ç”¨äºä¸€èˆ¬æƒ…æ™¯ï¼Œå®ƒå¿½ç•¥äº†ä¸¤ç§åˆ†ç±»é”™è¯¯çš„ä¸åŒé£é™©ã€‚</p></li><li><p>æŸ¥å‡†ç‡ï¼ˆPrecision)ã€å¬å›ç‡ï¼ˆRecallï¼‰ã€F-scoreï¼š</p><table><thead><tr><th></th><th>Tï¼ˆæ­£ç¡®ï¼‰</th><th>Fï¼ˆé”™è¯¯ï¼‰</th><th>æ€»è®¡</th></tr></thead><tbody><tr><td>Pï¼ˆæ­£ä¾‹ï¼‰</td><td>TP</td><td>FPï¼ˆç¬¬ä¸€ç±»é”™è¯¯ï¼Œ å‡æ­£ä¾‹ï¼‰</td><td>æ­£ä¾‹æ€»æ•°</td></tr><tr><td>Nï¼ˆåä¾‹ï¼‰</td><td>TN</td><td>FNï¼ˆç¬¬äºŒç±»é”™è¯¯ï¼Œ å‡åä¾‹ï¼‰</td><td>åä¾‹æ€»æ•°</td></tr><tr><td>æ€»è®¡</td><td>é¢„æµ‹æ­£ç¡®æ€»æ•°</td><td>é¢„æµ‹é”™è¯¯æ€»æ•°</td><td>æ ·ä¾‹æ€»æ•°</td></tr></tbody></table><p>åˆ™<br>$$<br>\begin{align}<br>&amp; \text{Precision} = \frac{TP}{TP+FP} \\<br>&amp; \text{Recall} = \frac{TP}{TP+FN}  \\<br>&amp; F_1 = \dfrac{2}{\dfrac{1}{\text{Precision} } + \dfrac{1}{\text{Recall} } }<br>\end{align}<br>$$</p></li></ol><h3 id="é€»è¾‘æ–¯è°›å›å½’ï¼ˆLogistic-Regression"><a href="#é€»è¾‘æ–¯è°›å›å½’ï¼ˆLogistic-Regression" class="headerlink" title="é€»è¾‘æ–¯è°›å›å½’ï¼ˆLogistic Regression)"></a>é€»è¾‘æ–¯è°›å›å½’ï¼ˆLogistic Regression)</h3><h4 id="ç›®æ ‡ï¼š"><a href="#ç›®æ ‡ï¼š" class="headerlink" title="ç›®æ ‡ï¼š"></a>ç›®æ ‡ï¼š</h4><p>ç»™å®šé›†åˆ$ \{ ({\bf x}_i, y_i \} ^ n _ {i=1} $, å…¶ä¸­$y_i \in \{0,1\}$,å¯»æ‰¾æ˜ å°„ï¼š<br>$$<br>f:X\rightarrow Y, where\ X=(X_1,\cdots,X_d)\ and\ Y\in\{0,1\}<br>$$</p><h4 id="åŸºæœ¬å‡è®¾ï¼š"><a href="#åŸºæœ¬å‡è®¾ï¼š" class="headerlink" title="åŸºæœ¬å‡è®¾ï¼š"></a>åŸºæœ¬å‡è®¾ï¼š</h4><ol><li>$Y \sim Bern(P)$, $Y$ æœä»ä¼¯åŠªåˆ©äºŒé¡¹åˆ†å¸ƒï¼Œ$P(Y=1) = p$.</li><li>$X = (X_1,\cdots,X_d)$ä¸­çš„$X_j$æ˜¯è¿ç»­éšæœºå˜é‡ã€‚</li><li>é«˜æ–¯åˆ†å¸ƒ: $P(X_j|Y=0)\sim N(\mu _ {j0}, \sigma _ j^2),P(X_j|Y=1)\sim  N(\mu _ {j1},\sigma_j^2)$</li><li>$X_i, X_j$æ¡ä»¶ç‹¬ç«‹äº$Y$, $\forall i\not=j$.</li></ol><h4 id="ç†è®ºä¾æ®ï¼š"><a href="#ç†è®ºä¾æ®ï¼š" class="headerlink" title="ç†è®ºä¾æ®ï¼š"></a>ç†è®ºä¾æ®ï¼š</h4><p>ç»¼ä¸Š,</p><p>$$<br>\begin{align}<br>P(Y=0|X) &amp;= \dfrac{P(X|Y=0)P(Y=0)}{P(X|Y=0)P(Y=0)+P(X|Y=1)P(Y=1) }<br>\\ &amp;= \dfrac{1}{1+\dfrac{P(X|Y=1)P(Y=1)}{P(X|Y=0)P(Y=0)} }<br>\\ &amp;= \dfrac{1}{1+\exp (\ln (\dfrac{P(X|Y=1)P(Y=1)}{P(X|Y=0)P(Y=0) } ) ) }<br>\\ &amp;= \dfrac{1}{1+ \exp(\sum_j \ln (\dfrac{P(X_j|Y=1)}{P(X_j|Y=0)})+ \ln \dfrac{p}{1-p})} (assumption\ 4)<br>\end{align}<br>$$</p><p>è€Œ</p><p>$$<br>\begin{align}<br>\sum_j \ln (\frac{P(X_j|Y=1)}{P(X_j|Y=0)}) &amp;= \sum_j \ln (\frac{\exp (-\dfrac{(X_j-\mu_{j1}) ^ 2}{2\sigma_j ^ 2})}{\exp (-\dfrac{(X_j-\mu_{j0}) ^ 2}{2 \sigma_j^2})})(assumption\ 3)<br>\\ &amp;= \sum_j\dfrac{\mu_{j1}-\mu_{j0}}{\sigma_j^2}X_j+\sum_j\frac{\mu_{j0}^2-\mu_{j1}^2}{2\sigma_j^2}<br>\end{align}<br>$$<br>å°†å…¶å¸¦å›åŸå¼ï¼Œ<br>$$<br>\begin{align}<br>P(Y=0|X) &amp;= \frac{1}{1+ \exp (\sum_j \dfrac{\mu_{j1}-\mu_{j0} }{\sigma_ j^ 2} X_j + \sum_j \dfrac{\mu_{j0}^ 2- \mu_ {j1}^ 2} {2 \sigma_ j^ 2}+ \ln \dfrac{p}{1-p})}<br>\\  &amp;= \frac{1}{1+ \exp (\sum_j w_j X_j + w_0)}<br>\end{align}<br>$$<br>äºæ˜¯åˆæœ‰<br>$$<br>\begin{align}<br>P(Y=1|X) &amp;= \frac{\exp(\sum_jw_jX_j+w_0)}{1+ \exp(\sum_jw_jX_j+w_0)}<br>\end{align}<br>$$<br>å¯è§å†³ç­–å¹³é¢$\sum_jw_jX_j+w_0=0$æ˜¯çº¿æ€§çš„ã€‚å½“æ‰¾åˆ°å†³ç­–å¹³é¢æ—¶ï¼Œè¯¥åˆ†ç±»é—®é¢˜å°±ä¼šè¿åˆƒè€Œè§£ã€‚è€Œä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‰¾å‡ºéœ€è¦çš„æƒå‘é‡${\bf w}$ã€‚</p><p><strong>é‡‡ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ³•ï¼š</strong><br>$$<br>\begin{align}<br>\hat {\bf w} &amp;= \arg \max_ \mathbf{w} \prod_i P(y_i|X_i,{\bf w})<br>\\ &amp;= \arg \max_ \mathbf{w} \sum_i \ln (P(y_i|X_i, {\bf w}) )<br>\end{align}<br>$$</p><p>ä»¤ $-L({\bf w}) = \sum_i(y_i \ln(P(Y=1|X_i,{\bf w}))+(1-y_i) \ln(P(Y=0|X_i,{\bf w})))$,åˆ™é—®é¢˜è½¬åŒ–ä¸ºï¼š<br>$$<br>\hat{\bf w} = \arg \min_{\bf w}L({\bf w})<br>$$<br>é‚£ä¹ˆä¼¼ä¹å¯ä»¥ç”¨æ¢¯åº¦ä¸‹é™æ³•æ¥æ±‚è§£è¯¥é—®é¢˜ã€‚ï¼ˆè§£çš„å­˜åœ¨æ€§ã€å”¯ä¸€æ€§ï¼ˆä¸¥æ ¼å‡¸ã€å¼ºå‡¸ï¼‰ï¼‰</p><p>é‡‡ç”¨æ­£åˆ™åŒ–å¯ä»¥ä¿è¯è¿™ä¸¤ç‚¹ï¼š<br>$$<br>\hat {\bf w} = \arg \max_{\bf w} L({\bf w})+\frac{\lambda}{2}\Vert{\bf w}\Vert_2^2<br>$$</p><p>å¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œå¯ä»¥è®­ç»ƒå¤šä¸ªåˆ†ç±»å™¨ã€‚å…¶ä¸­$Y\in \cal{C} = {c_1, \cdots, c_k}$ï¼Œå¯ä»¤</p><p>$$<br>\begin{align}<br>P(Y\not=c_k|X) &amp;= \frac{1}{1+ \exp(\sum_jw_{kj}X_j+w_{k0})}<br>\end{align}<br>$$</p><p>$$<br>P(Y=c_k|X) =<br>\begin{cases}<br>&amp;  \dfrac{\exp(\sum_j w_{kj}X_j + w_{k0})}{1 + \sum_{k=1}^{K-1}\exp(\sum_j w_{kj}X_j + w_{k0}) } &amp; k = 1, \cdots,K-1 \\<br>&amp; \dfrac{1}{1 + \sum_{k=1}^{K-1}\exp(\sum_j w_{kj}X_j + w_{k0}) } &amp; k = K-1<br>\end{cases}<br>$$</p><h4 id="å®é™…é—®é¢˜ï¼šæ•°æ®çš„ä¸å¹³è¡¡æ€§"><a href="#å®é™…é—®é¢˜ï¼šæ•°æ®çš„ä¸å¹³è¡¡æ€§" class="headerlink" title="å®é™…é—®é¢˜ï¼šæ•°æ®çš„ä¸å¹³è¡¡æ€§"></a>å®é™…é—®é¢˜ï¼šæ•°æ®çš„ä¸å¹³è¡¡æ€§</h4><p>æ¥è‡ªä¸åŒåˆ†ç±»çš„æ•°æ®æ•°ç›®ä¸å¹³è¡¡æ—¶ï¼Œå›å¯¼è‡´è®­ç»ƒå¾—å‡ºçš„å†³ç­–å¹³é¢æœ‰æ›´å¤§çš„åç§»ã€‚</p><p>è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š</p><ul><li><p>undersampleï¼ˆä¸»è¦ï¼‰</p></li><li><p>oversample</p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå…¥é—¨æ€»ç»“</title>
      <link href="/docker/"/>
      <url>/docker/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰ä¸€ç›´ä¸çŸ¥é“dockerç©¶ç«Ÿæ˜¯ä¸ªä»€ä¹ˆï¼Œä¹Ÿä¸€ç›´æ²¡æœ‰ç”¨è¿‡ï¼Œåœ¨æœåŠ¡å™¨ä¸Šè·‘ä»£ç ä¹Ÿåªæ˜¯å…ˆè£…ç¯å¢ƒï¼Œç„¶åå†åœ¨IDEè¿œç¨‹è¿æ¥æœåŠ¡å™¨è¿è¡Œã€‚æœ€è¿‘æƒ³ç”¨<a href="http://gcr/" target="_blank" rel="noopener">GCR</a>ä¸Šçš„å¡æ¥è·‘å®éªŒï¼Œæ¨èä½¿ç”¨dockerï¼ˆä¸çŸ¥é“æ˜¯å¦å¿…é¡»ä½¿ç”¨ï¼‰ï¼Œæƒ³æƒ³ä¹Ÿå¯ä»¥è¶ç€è¿™ä¸ªæœºä¼šç¨å¾®å…¥ä¸ªé—¨ï¼Œä¹Ÿå°±å­¦äº†å­¦ï¼Œè¿‡ç¨‹ä¹Ÿä¼¼ä¹ä¸æ˜¯é‚£ä¹ˆé¡ºåˆ©ï¼ˆèŠ±äº†å¥½å‡ å¤©ï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¼¼ä¹å·²ç»å¯ä»¥åœ¨dockeré‡Œè·‘ä»£ç äº†ï¼Œä¹Ÿç®—æ˜¯åˆæ­¥æˆåŠŸäº†å§ï¼Œäºæ˜¯æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p></blockquote><p>æˆ‘çš„å‚è€ƒèµ„æ–™ä¸»è¦æ˜¯æˆ‘çš„mentoræä¾›ç»™æˆ‘ä¸€ä»½pptä»¥åŠä¸€ä»½æ›´ç®€æ˜“çš„<a href="https://github.com/CHUNYUWANG/GCR-Notebook/blob/master/Process.md" target="_blank" rel="noopener">è¯´æ˜æŒ‡å—</a>ï¼Œä¹Ÿå› ä¸ºå¾ˆå¤šä¸ç†è§£çš„åœ°æ–¹æŸ¥äº†ä¸å°‘èµ„æ–™ï¼Œæˆ‘ç»¼åˆäº†ä¸€ä¸‹ï¼Œä¸»è¦è¿˜æ˜¯ä»¥pptä¸Šçš„æ­¥éª¤ä¸ºä¸»ï¼ˆå®ƒä¸ä»…ä»…é€‚ç”¨äºGCRï¼‰ã€‚</p><h3 id="æµ‹è¯•Dockeræ˜¯å¦å·¥ä½œ"><a href="#æµ‹è¯•Dockeræ˜¯å¦å·¥ä½œ" class="headerlink" title="æµ‹è¯•Dockeræ˜¯å¦å·¥ä½œ"></a>æµ‹è¯•Dockeræ˜¯å¦å·¥ä½œ</h3><p>é»˜è®¤docker/nvidia-dockeréƒ½å·²ç»å®‰è£…äº†</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker# The standard docker.</span><br><span class="line"><span class="meta">$</span> nvidia-docker# The docker equipped with GPU.</span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run hello-world</span><br><span class="line"><span class="meta">$</span> nvidia-docker run --rm nvidiaidia-smi</span><br></pre></td></tr></tbody></table></figure><h3 id="åœ¨Docker-Hubä¸Šåˆ›å»ºè´¦å·"><a href="#åœ¨Docker-Hubä¸Šåˆ›å»ºè´¦å·" class="headerlink" title="åœ¨Docker Hubä¸Šåˆ›å»ºè´¦å·"></a>åœ¨Docker Hubä¸Šåˆ›å»ºè´¦å·</h3><p>è¿™ä¸ªä¸»è¦æ˜¯å¯ä»¥æŠŠè‡ªå·±æœ¬åœ°çš„docker imageç»™pushåˆ°docker hubä¸Šï¼Œè¿™æ ·ä¹‹åè‡ªå·±æˆ–è€…ä»–äººä¹Ÿå¯ä»¥åœ¨åˆ«çš„åœ°æ–¹pullè¿™ä¸ªé•œåƒåˆ°æœ¬åœ°æ¥ä½¿ç”¨ã€‚</p><p>æ³¨å†Œæ—¶çš„ç”¨æˆ·åä¹Ÿå°±æ˜¯ä½ ä¹‹åpushæ—¶é•œåƒåå­—çš„å‰ç¼€ã€‚</p><h3 id="åˆ›å»ºè‡ªå·±çš„é•œåƒ"><a href="#åˆ›å»ºè‡ªå·±çš„é•œåƒ" class="headerlink" title="åˆ›å»ºè‡ªå·±çš„é•œåƒ"></a>åˆ›å»ºè‡ªå·±çš„é•œåƒ</h3><p>å…ˆåœ¨Docker Hubä¸Šæ‰¾ä¸€ä¸ªé•œåƒï¼Œæ¯”å¦‚$\tt{nvidia/cuda:9.1-devel-ubuntu16.04}$ï¼Œé•œåƒçš„çš„å‘½åæ ¼å¼ä¸º$\tt{repository:tag}$ï¼Œä¸€ä¸ªrepositoryå¯ä»¥æœ‰å¤šä¸ªtagï¼Œæˆ‘çš„ç†è§£æ˜¯å¤šä¸ªä¸åŒç‰ˆæœ¬ã€‚</p><p><img src="nvidia_cuda.PNG" alt=""></p><p><img src="cuda16.PNG" alt=""></p><p>å…ˆä»‹ç»é€šè¿‡å‘½ä»¤è¡Œè¾“å…¥å’ŒcommitæŒ‡ä»¤åˆ›å»ºé•œåƒçš„æ–¹æ³•ã€‚å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥è¿›å…¥æˆ‘ä»¬é€‰æ‹©çš„dockerï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼Œå®ƒä¹Ÿä¼šå…ˆè‡ªåŠ¨pullä¸‹æ¥ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> nvidia-docker run -it nvidia/cuda:9.0-devel-ubuntu16.04</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> root@fbcc4a9105ac:/#</span><br></pre></td></tr></tbody></table></figure><p>æ‰§è¡Œå‘½ä»¤åå°±ä¼šçœ‹åˆ°$\tt{root@}$åé¢è·Ÿç€ä¸€ä¸²å­—ç¬¦ï¼Œæˆ‘è§‰å¾—å¯ä»¥çœ‹æˆæ˜¯è¿™æ¬¡æ“ä½œçš„ä¸€ä¸ªIDï¼Œåœ¨commitä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨dockeré‡Œæ‰§è¡Œçš„æ“ä½œå¹¶ä¸ä¼šä¿å­˜ä¸‹æ¥ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•å»å®‰è£…ä¸œè¥¿äº†ï¼Œå› ä¸ºæˆ‘éœ€è¦ä½¿ç”¨python3å’Œpytorchï¼Œä»¥åŠéœ€è¦å…¶ä»–çš„ä¸€äº›åŒ…ï¼Œæ‰€ä»¥ä¸‹é¢çš„ç¤ºä¾‹ä¹Ÿä¼šå’Œè¿™ä¸ªç›¸å…³ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å®‰è£… cudann 7.0, python3, pip3.</span><br><span class="line"><span class="meta">$</span> apt-get install -y --no-install-recommends \</span><br><span class="line">            libcudnn7=7.0.5.15-1+cuda9.0 \</span><br><span class="line">            libcudnn7-dev=7.0.5.15-1+cuda9.0 \</span><br><span class="line">            sudo python3-dev python3-pip libgtk2.0-dev </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åˆ›å»ºè½¯è¿æ¥</span><br><span class="line"><span class="meta">$</span> cd /usr/bin </span><br><span class="line"><span class="meta">$</span> rm python </span><br><span class="line"><span class="meta">$</span> ln -s python3 python </span><br><span class="line"><span class="meta">$</span> ln -s pip3 pip </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£…éœ€è¦çš„åŒ…ï¼Œå¦‚pytorch</span><br><span class="line"><span class="meta">$</span> pip --no-cache-dir install torch</span><br><span class="line"><span class="meta">$</span> pip --no-cache-dir install torchvision</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> apt-get clean</span><br><span class="line"><span class="meta">$</span> rm -rf /var/lib/apt/lists/* # å…·ä½“ç”¨å¤„æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œå¯èƒ½æ˜¯åˆ é™¤ä¸€äº›ç¼“å­˜ï¼Ÿ</span><br></pre></td></tr></tbody></table></figure><p>è¾“å…¥$\tt{Ctrl + D}$ å¯ä»¥é€€å‡ºdockerã€‚</p><p>ç„¶åæˆ‘ä»¬éœ€è¦æäº¤æˆ‘ä»¬åˆšæ‰å¯¹å®¹å™¨è¿›è¡Œçš„ä¿®æ”¹ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker commit fbcc4a9105ac hytu99/pytorch:py35</span><br></pre></td></tr></tbody></table></figure><p>å‰é¢çš„å­—ç¬¦ä¸²å°±æ˜¯æˆ‘ä»¬åˆšæ‰è¿›å…¥å®¹å™¨åç”Ÿæˆçš„é‚£ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæˆ‘ä»¬è¦commitçš„dockerï¼Œåé¢åˆ™æ˜¯æˆ‘ä»¬æäº¤åé•œåƒçš„åå­—ï¼Œä¸€èˆ¬æ ¼å¼æ˜¯$\tt{username/repository:tag}$ã€‚å¦‚æœä¸éœ€è¦pushåˆ°docker hubï¼Œåº”è¯¥ä¹Ÿå¯ä»¥ä¸éœ€è¦å‰é¢çš„$\tt{username}$å‰ç¼€ã€‚</p><p>ä¹‹åæ‰§è¡Œ$\tt{docker\ images}$æˆ–è€…$\tt{docker\ image \ ls}$å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°æœ¬åœ°çš„dockeräº†ï¼Œå…¶ä¸­$\tt{IMAGE \ ID}$ä¹Ÿå”¯ä¸€æŒ‡å®šäº†ä¸€ä¸ªdockerã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†æœ¬åœ°çš„dockerç»™pushåˆ°docker hubä¸Šã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker login</span><br><span class="line"><span class="meta">#</span> è¾“å…¥ä½ çš„ç”¨æˆ·åå’Œå¯†ç </span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> sudo docker push hytu99/pytorch:py35 # ä¹Ÿå¯ä»¥æ˜¯docker push IMAGE ID</span><br></pre></td></tr></tbody></table></figure><p>pushå®Œåæˆ‘ä»¬å°±èƒ½åœ¨docker hubä¸ŠRepositoriesé‡Œçœ‹åˆ°è¿™ä¸ªdockeräº†ã€‚</p><p><img src="repo.png" alt=""></p><p>ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒç›´è§‚ä¸€äº›ï¼Œä½†ä¹Ÿæœ‰æ›´ç®€ä¾¿çš„æ–¹æ³•ï¼Œç”¨$\tt{docker \ build}$å‘½ä»¤ï¼Œå¯ä»¥å°†ä¸Šé¢å®‰è£…ä¸œè¥¿çš„è¯­å¥å†™è¿›ä¸€ä¸ªæ–‡ä»¶ï¼ˆDockerfileï¼‰é‡Œï¼Œä¸è¿‡å¾—ç¡®ä¿æ–‡ä»¶é‡Œæ²¡æœ‰æ‹¼å†™ç­‰é”™è¯¯ï¼Œå¦åˆ™å¯èƒ½å¤±è´¥ã€‚</p><p>åœ¨â€œ/home/hanyue/code/myproject/test/â€è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªâ€œtest_docker.pyâ€, æƒ³ç”¨æœ¬åœ°è¿™ä¸ªdockeræ¥è¿è¡Œè¿™ä¸ªä»£ç çš„è¯ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run --rm --ipc=host --volume-driver=nfs -v /home:/home hytu99/pytorch:py35 sh -c "cd /home/hanyue/code/myproject/test/ &amp;&amp; python -u test_docker.py"  # å…·ä½“ä¸€äº›å‚æ•°çš„æ„ä¹‰æˆ‘ä¹Ÿä¸æ˜¯å®Œå…¨äº†è§£ï¼Œé‡ç‚¹åº”è¯¥æ˜¯-v &lt;src&gt;:&lt;dst&gt;æŒ‡å®šè·¯å¾„ï¼Œä»¥åŠåé¢æŒ‡å®šdockerå’Œshellå‘½ä»¤</span><br></pre></td></tr></tbody></table></figure><h3 id="åœ¨GCRä¸Šä½¿ç”¨Docker"><a href="#åœ¨GCRä¸Šä½¿ç”¨Docker" class="headerlink" title="åœ¨GCRä¸Šä½¿ç”¨Docker*"></a>åœ¨GCRä¸Šä½¿ç”¨Docker*</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> è®¾ç½®ç¯å¢ƒå˜é‡</span><br><span class="line"><span class="meta">$</span> uid=$(id -u)</span><br><span class="line"><span class="meta">$</span> did=$(id -g)</span><br><span class="line"><span class="meta">$</span> alias=$(whoami|awk -F. '{ print $2 }' )</span><br><span class="line"><span class="meta">$</span> domain=$(whoami|awk -F. '{print $1}â€™)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åˆ›å»ºä¸€ä¸ªæ–‡ä»¶â€œmyconfigâ€</span><br><span class="line"><span class="meta">$</span> vim myconfig</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸‹ä¸ºâ€œmyconfigâ€æ–‡ä»¶çš„ä¸€ä¸ªç¤ºä¾‹å†…å®¹ï¼Œä¹‹å‰åˆ›å»ºdockeréƒ¨åˆ†çš„å®‰è£…å‘½ä»¤ä¹Ÿå¯ä»¥æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä¹Ÿå³å‰é¢æåˆ°çš„ç›´æ¥ä½¿ç”¨buildå‘½ä»¤æ¥åˆ›å»ºdockerã€‚</p><figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#--------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">FROM</span> hytu99/pytorch:py35</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="keyword">ARG</span> uid</span><br><span class="line"><span class="keyword">ARG</span> did</span><br><span class="line"><span class="keyword">ARG</span> domain</span><br><span class="line"><span class="keyword">ARG</span> alias</span><br><span class="line"></span><br><span class="line"><span class="comment"># The below will create your user in your container which you can use to run jobs</span></span><br><span class="line"><span class="keyword">RUN</span> apt-get update</span><br><span class="line"><span class="keyword">RUN</span> apt-get -y install sudo \</span><br><span class="line">&amp;&amp; &gt; /etc/sudoers.d/${alias} \</span><br><span class="line">&amp;&amp; echo "${domain}.domain users:x:${did}:${domain}.${alias}" &gt;&gt; /etc/group \</span><br><span class="line">&amp;&amp; echo "${domain}.${alias}:x:${uid}:${did}:${alias},,,:/home/${alias}:/bin/bash" &gt;&gt; /etc/passwd \</span><br><span class="line">&amp;&amp; echo "${domain}.${alias}:*:17575:0:99999:7:::" &gt;&gt; /etc/shadow \</span><br><span class="line">&amp;&amp; echo "${domain}.${alias} ALL=(ALL) NOPASSWD:ALL" &gt; /etc/sudoers.d/${alias} \</span><br><span class="line">&amp;&amp; echo "  " &gt;&gt; /etc/sudoers.d/${alias} \</span><br><span class="line"># Copy "myconfig" file into my container on build</span><br><span class="line"><span class="keyword">COPY</span> myconfig /root/myconfig</span><br><span class="line"><span class="comment">#--------------------------------------------------------------------------</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> åœ¨â€œgcr-reposâ€æœåŠ¡å™¨ä¸Šåˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„dockeré•œåƒï¼Œè¿™é‡Œçš„REPOSITORYå’ŒTAGåº”è¯¥ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±æŒ‡å®šçš„ã€‚</span><br><span class="line"><span class="meta">$</span> sudo docker build -t gcr-repos.redmond.corp.microsoft.com:5000/${alias}/REPOSITORY:TAG  \</span><br><span class="line">             --build-arg uid=$uid \</span><br><span class="line">             --build-arg did=$did \</span><br><span class="line">             --build-arg alias=$alias \</span><br><span class="line">             --build-arg domain=$domain \</span><br><span class="line">             -f myconfig .</span><br><span class="line">             </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æŠŠé•œåƒæ¨é€åˆ°æœåŠ¡å™¨ä¸Š</span><br><span class="line"><span class="meta">$</span> docker push gcr-repos.redmond.corp.microsoft.com:5000/${alias}/REPOSITORY:TAG</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœè¦ä½¿ç”¨â€œgcr-reposâ€æœåŠ¡å™¨ä¸Šçš„dockerï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run --rm --ipc=host --volume-driver=nfs -v gcrnfsw2-msraim.redmond.corp.microsoft.com/msraimscratch:/msraimscratch --user FAREAST.v-hatu gcr-repos.redmond.corp.microsoft.com:5000/v-hatu/pytorch:py35 sh -c "cd /msraimscratch/v-hatu/myproject &amp;&amp; python -u test/test_docker.py -1&gt; out.txt 2&gt;err.txt"</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æœºå™¨å­¦ä¹ ç¬”è®°ã€‘2. Gradient Descent</title>
      <link href="/ml-gradient-descent/"/>
      <url>/ml-gradient-descent/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†è‡ªåŒå­¦çš„ç¬”è®°</p></blockquote><h3 id="Gradient-Descent"><a href="#Gradient-Descent" class="headerlink" title="Gradient Descent"></a>Gradient Descent</h3><h4 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h4><p>$$<br>\min f(\mathbf{x})<br>$$</p><ul><li><p>$f(\mathbf{x})$ is continuously differentiable.</p></li><li><p>$f(\mathbf{x})$ is convex.</p></li></ul><hr><p><strong>Definition:</strong> A set $C$ is convex if the line segment between any two points in $C$ lies in $C$. that is $\forall x_1,x_2 \in C$, and $\forall \theta \in [0, 1]$, we have $\theta x_1 + (1-\theta)x_2 \in C$.</p><p><strong>Definition:</strong> A function $f: \mathbb{R}^n\rightarrow\mathbb{R}$ is convex if $\rm{dom}$ $f$ is convex and if $\mathbf{x},\mathbf{y} \in$ ${\rm dom}f$ and $\theta \in [0, 1]$, we have $f(\theta \mathbf{x} + (1-\theta)\mathbf{y}) \le \theta f(\mathbf{x}) + (1-\theta)f(\mathbf{y})  $.</p><p><strong>Definition:</strong> A function is strict convex if strict inequality holds where $\mathbf{x} \ne \mathbf{y}$ and  $\theta \in [0, 1]$.</p><p><strong>Definition:</strong> A function is strongly convex with parameter $u$ if  $f - \dfrac{u}{2} \Vert \mathbf{x} \Vert ^2$ is convex.</p><hr><p><strong>Theorem 1:</strong> Suppose that $f$ is continuously differentiable. Then $f$ is convex if and only if $\rm{dom}$ $f$ is convex and $f(\mathbf{y}) \ge f(\mathbf{x}) + \langle \nabla f(\mathbf{x}), \mathbf{y}-\mathbf{x} \rangle, \forall \mathbf{x}, \mathbf{y} \in $ ${\rm dom}f$.</p><p><strong>Proof:</strong> </p><p>$( \Rightarrow )$ </p><p>$$<br>\begin{align}<br>f(\mathbf{x} + \theta(\mathbf{y}-\mathbf{x})) &amp;\le f(\mathbf{x}) + \theta [f(\mathbf{y}) - f(\mathbf{x})]\\<br>f(\mathbf{y}) - f(\mathbf{x}) &amp;\ge \lim_{\theta \to 0} \frac{f(\mathbf{x} + \theta(\mathbf{y}-\mathbf{x}))}{\theta}\text{ï¼ˆæ–¹å‘å¯¼æ•°ï¼‰}\\<br>&amp;= \langle \nabla f(\mathbf{x}), \mathbf{y}-\mathbf{x} \rangle<br>\end{align}<br>$$</p><p>$ ( \Leftarrow ) $</p><p>$$<br>\mathbf{z} = \theta \mathbf{x} + (1 - \theta) \mathbf{y}<br>$$</p><p>$$<br> f(\mathbf{x}) \ge f(\mathbf{z}) + \langle \nabla f(\mathbf{z}), \mathbf{x} - \mathbf{z} \rangle \tag{1}<br>$$</p><p>$$<br> f(\mathbf{y}) \ge f(\mathbf{z}) + \langle \nabla f(\mathbf{z}), \mathbf{y} - \mathbf{z} \rangle \tag{2}<br>$$</p><p>$ \theta (1) + (1 - \theta) (2)  $å¯å¾—ã€‚</p><p><strong>Corollary:</strong> Suppose $ f $ is continuously differentiable. Then $ f $ is convex iff  ${\rm dom}f$ is convex and $\langle \nabla f(\mathbf{x})- \nabla f(\mathbf{y}), \mathbf{x}  - \mathbf{y} \rangle \ge 0$.</p><p><strong>Theorem 2:</strong> Suppose that $ f $ is continuously differentiable. Then $ f $ is convex iff ${\rm dom}f$  is convex and $ \nabla ^2 f (\mathbf{x}) \ge 0 $.</p><p><strong>Proof:</strong> </p><p>$ ( \Rightarrow ) $</p><p>Let $ \mathbf{x} _ t = \mathbf{x} + t \mathbf{s} $, $t &gt; 0$. Then</p><p>$$<br>\begin{align}<br>0 \le \frac{1}{t^2} &amp; \langle \nabla f(\mathbf{x} _ t) - \nabla f(\mathbf{x}) , \mathbf{x} _ t - \mathbf{x} \rangle \\<br>&amp; = \frac {1}{t} \langle \nabla f(\mathbf{x} _ t) - \nabla f(\mathbf{x}), \mathbf{s} \rangle \\<br>&amp; = \frac {1}{t} \int _ 0 ^ t \langle \nabla ^2 f(\mathbf{x} + \tau \mathbf{s})\mathbf{s}, \mathbf{s} \rangle d\tau \text{ï¼ˆå¾®ç§¯åˆ†åŸºæœ¬å®šç†ï¼‰}\\<br>&amp; \xrightarrow{t \to 0} \langle \nabla ^2 f(\mathbf{x})\mathbf{s}, \mathbf{s} \rangle \\<br>&amp; = \mathbf{s}^T \nabla ^2 f(\mathbf{x}) \mathbf{s}<br>\end{align}<br>$$</p><p>$ ( \Leftarrow ) $</p><p>$$<br>\begin{align}<br>g(t) &amp; = f(\mathbf{x} + t \mathbf{s}) \\<br>gâ€™(0) &amp;= \langle \nabla f(\mathbf{x}), \mathbf{s} \rangle \\<br>gâ€™â€™(0) &amp;= \langle \nabla ^2 f(\mathbf{x})\mathbf{s}, \mathbf{s} \rangle \\<br>g(1) &amp; = g(0) + \int _ 0 ^ 1 gâ€™(t) dt \\<br>&amp;  = g(0) + \int _ 0 ^ 1 [gâ€™(0) + \int _ 0 ^ t gâ€™â€™(\tau) d\tau ] dt \\<br>&amp; \ge g(0) + gâ€™(0) \\<br>f(\mathbf{x} +  \mathbf{s}) &amp; \ge f(\mathbf{x}) + \langle \nabla f(\mathbf{x}), \mathbf{s} \rangle<br>\end{align}<br>$$</p><p><strong>Theorem 3:</strong> Suppose $f$ is  continuously differentiable. Then $ \mathbf{x}^  * \in \arg \min \limits _ \mathbf{x}  f ( \mathbf{x})  $  iff $ \nabla f(\mathbf{x}^ *) = 0$, $  f(\mathbf{y}) \ge f(\mathbf{x}) + \langle \nabla f(\mathbf{x}), \mathbf{y} - \mathbf{x} \rangle = f(\mathbf{x})$.</p><h4 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h4><p>$$<br>\min f(\mathbf{x})<br>$$</p><ul><li>The objective function $f(\mathbf{x})$ is continuously differentiable.</li><li>$f(\mathbf{x})$ is convex.</li><li>$\exists {\bf x^ *} \in {\rm dom}f$, s.t. $ f({\bf x^ *})= f^ * = \min f({\bf x}) $.</li><li>The gradient of $f$ is Lipschitz continuous, that is, $ \Vert \nabla f({\bf x}) - \nabla f({\bf y}) \Vert \le L \Vert {\bf x}-{\bf y} \Vert$, $L&gt;0$.</li></ul><h5 id="Algorithm-Gradient-Descent"><a href="#Algorithm-Gradient-Descent" class="headerlink" title="Algorithm:  Gradient Descent"></a>Algorithm:  Gradient Descent</h5><p>$$<br>\begin{align}<br>&amp; \text{Input: An initial point } {\bf x_0} \text{, a constant } \alpha \in (0, \dfrac{2}{L}), \ k = 0 \\<br>&amp; \text{while the termination condition does not hold,  do} \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ k = k + 1 \\<br>&amp; ~ ~ ~ ~ ~ ~ ~ ~ {\bf x_{k+1}}={\bf x_k}-\alpha\nabla f({\bf x_k}) \\<br>&amp; \text{end while}<br>\end{align}<br>$$</p><h5 id="Convergence-Rate"><a href="#Convergence-Rate" class="headerlink" title="Convergence Rate"></a>Convergence Rate</h5><p><strong>Definition:</strong> Suppose that the sequence { $a_k$} converges to a number $L$. Then, the sequence is said to converge linearly to $L$ if there exists a number $\mu \in (0, 1)$, s.t. $\lim \limits _ {k \to \infty } \dfrac{\vert a_{k + 1} - L\vert}{\vert a_k - L \vert} = \mu$.</p><p><strong>Lemma 1:</strong> Suppose that a function $f \in  C^1$. If $\nabla f$ is Lipschitz continuous with Lipschitz constant $L$, then<br>$$<br>f({\bf y}) \le f({\bf x}) + \langle \nabla f({\bf x}),{\bf y} - {\bf x} \rangle+\dfrac{L}{2} \Vert {\bf y}-{\bf x}\Vert^2.<br>$$</p><p><strong>Proof:</strong><br>$$<br>\begin{align}<br>f({\bf y})-f({\bf x}) &amp;= \int^{\bf y}_{\bf x}\nabla f({\bf z}){\bf dz}<br>\\&amp;= \int^1_0 \langle\nabla f({\bf x}+t({\bf y}-{\bf x})),{\bf y}-{\bf x}\rangle dt<br>\\&amp;= \langle\nabla f({\bf x}),{\bf y}-{\bf x}\rangle+\int^1_0 \langle\nabla f({\bf x}+t({\bf y}-{\bf x}))-\nabla f({\bf x}),{\bf y}-{\bf x}\rangle dt<br>\\&amp;\le \langle\nabla f({\bf x}),{\bf y}-{\bf x}\rangle+\int^1_0 \Vert\nabla f({\bf x}+t({\bf y}-{\bf x}))-\nabla f({\bf x})\Vert\Vert{\bf y}-{\bf x}\Vert dt<br>\\&amp;\le \langle\nabla f({\bf x}),{\bf y}-{\bf x}\rangle+L\Vert{\bf y}-{\bf x}\Vert^2\int^1_0 t dt<br>\\&amp;=\langle\nabla f({\bf x}),{\bf y}-{\bf x}\rangle+\frac{L}{2}\Vert {\bf y}-{\bf x}\Vert^2<br>\end{align}<br>$$</p><p>ï¼ˆä¸å‡¹å‡¸æ€§æ— å…³ï¼‰</p><p><strong>Lemma 2 ï¼ˆDescent Lemmaï¼‰ :</strong> Suppose that a function $f \in  C^1$. If $\nabla f$ is Lipschitz continuous with Lipschitz constant $L&gt;0$, then $\forall \{ {\bf x_k} \}$ generated by the Gradient Descent Algorithm satisfies<br>$$<br>f({\bf x_{k+1}})\le f({\bf x_k})-{\alpha}(1-\frac{L\alpha}{2})\Vert\nabla f({\bf x_k})\Vert^2.<br>$$</p><p>ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç®—æ³•çº¦å®š$\alpha \in (0, \dfrac{2}{L})$ï¼‰</p><p>ä¸‹é¢è¯æ˜ç®—æ³•å¯ä»¥æ”¶æ•›åˆ°æœ€å°å€¼ï¼Œåœ¨å‰ææ¡ä»¶ä¸‹ï¼Œå¯ä»¥è€ƒè™‘è¯æ˜ï¼š<br>$$<br>\lim_{k \to \infty}\nabla f({\bf x_k}) = \nabla f(\lim_{ k\to \infty}{\bf x_k})=0.<br>$$<br><strong>Proof:</strong></p><p>ç”±Lemma 2ï¼Œ<br>$$<br>\begin{align}<br>\Vert \nabla f({\bf x_k})\Vert^2 &amp; \le \frac{f({\bf x_{k}})-f({\bf x_{k+1}})}{\alpha(1-\frac{L\alpha}{2})} \\<br>\sum_k\Vert \nabla  f({\bf x_k})\Vert^2 &amp;\le \frac{f({\bf x_0})-f({\bf x_{k+1}})}{\alpha(1-\frac{L\alpha}{2})}\\<br>&amp;\le\frac{f({\bf x_0})-f^ *}{\alpha(1-\frac{L\alpha}{2})}<br>\end{align}<br>$$<br>è¿™ä¸ªæ±‚å’Œå­˜åœ¨å›ºæœ‰ä¸Šç•Œï¼Œæ•…<br>$$<br>\lim_{k\to \infty} \nabla f({\bf x_k}) =0<br>$$</p><h5 id="Efficiency-and-limitations"><a href="#Efficiency-and-limitations" class="headerlink" title="Efficiency and limitations"></a>Efficiency and limitations</h5><p><strong>Theorem:</strong>  Consider the Problemï¼ˆ$\min f(x)$ï¼‰and the sequence generated by the Gradient Descent Algorithm. Then the sequence value $f({\bf x_k})$ tends to the optimum function value in a rate of $O(\frac{1}{k})$.</p><ol><li><p>If $\alpha \in (0, \dfrac{1}{L})$<br>$$<br>f({\bf x_k})-f^ * \le \frac{1}{k}(\frac{1}{2\alpha}\Vert {\bf x_0-x^ *}\Vert^2)<br>$$</p></li><li><p>If $ \alpha \in (\dfrac{1}{L}, \dfrac{2}{L}) $<br>$$<br>f({\bf x_k})-f^ * \le \frac{1}{k}(\frac{1}{2\alpha}\Vert {\bf x_0-x^ *}\Vert^2+\frac{L\alpha -1}{2-L\alpha}(f({\bf x_0})-f({\bf x ^  * })) )<br>$$</p></li></ol><p><strong>Proof:</strong></p><p>As $ {\bf x_{k+1}}={\bf x_k}-\alpha\nabla f({\bf x_k})$ and $ f({\bf y}) \le f({\bf x}) + \langle\nabla f({\bf x}),{\bf y}-{\bf x}\rangle+\dfrac{L}{2}\Vert {\bf y}-{\bf x}\Vert^2 $, </p><p>$$<br>f({\bf x_{k+1}})\le f({\bf x_{k}})-(\frac{1}{\alpha}-\frac{L}{2})\Vert{\bf x_{k+1}-x_k}\Vert^2<br>$$</p><p>$$<br>f({\bf x_{k+1}})-f^ *\le f({\bf x_{k}})-f^ *-(\frac{1}{\alpha}-\frac{L}{2})\Vert{\bf x_{k+1}-x_k}\Vert^2<br>$$</p><p>Consider the convexity of $f$,</p><p>$$<br>\begin{align}<br>f({\bf x _ {k + 1} })-f({\bf x^ *}) &amp; \le \langle \nabla f({\bf x_k}), { \bf x_k}-{\bf x^ *}\rangle-(\frac{1}{\alpha}-\frac{L}{2})\Vert{\bf x_{k+1}-x_k}\Vert^2<br>\\ &amp; = -\frac{1}{\alpha} \langle{\bf x_{k+1}}-{\bf x_k},{\bf x_k}-{\bf x^ *}\rangle-(\frac{1}{\alpha}-\frac{L}{2})\Vert{\bf x_{k+1}-x_k}\Vert^2<br>\\ &amp; = -\frac{1}{2\alpha}(\Vert{\bf x_{k+1}}-{\bf x^ *}\Vert^2-\Vert{\bf x_{k+1}}-{\bf x_k}\Vert^2-\Vert{\bf x_{k}}-{\bf x^ *}\Vert^2)-(\frac{1}{\alpha}-\frac{L}{2})\Vert{\bf x_{k+1}}-{\bf x_k}\Vert^2<br>\\ &amp; = \frac{1}{2\alpha}(\Vert{\bf x_{k}}-{\bf x^ *}\Vert^2-\Vert{\bf x_{k+1}}-{\bf x^ *}\Vert^2)-(\frac{1}{2\alpha}-\frac{L}{2})\Vert{\bf x_{k+1}}-{\bf x_k}\Vert^2<br>\end{align}<br>$$</p><p>Summing up the inequalities,</p><p>$$<br>\begin{align}<br>k(f({\bf x_{k} })-f({\bf x ^ *})) &amp;\le \sum ^ { k-1 } _ { i=0 } ( f({\bf x _ {i + 1}})- f({\bf x^ * }) ) \\<br>&amp; \le \frac{1}{2 \alpha }(\Vert {\bf x_{0} }-{\bf x^ *}\Vert^2-\Vert{\bf x_{k}} - {\bf x ^ *} \Vert^2 ) - (\frac{1}{2\alpha} - \frac{L}{2} ) \sum^{k-1}_{i=0} \Vert{\bf x _ {i+1} }- {\bf x_i} \Vert^2<br>\end{align}<br>$$</p><ol><li>If $\alpha \in (0, \dfrac{1}{L})$, $\dfrac{1}{2\alpha}-\dfrac{L}{2}&gt;0$, then</li></ol><p>$$<br>k(f({\bf x_{k}})-f({\bf x^ *})) \le\frac{1}{2\alpha}\Vert{\bf x_{0}}-{\bf x^ *}\Vert^2.<br>$$</p><ol start="2"><li>If $\alpha \in (\dfrac{1}{L}, \dfrac{2}{L})$, $\dfrac{1}{2\alpha}-\dfrac{L}{2}&gt;0$, then</li></ol><p>$$<br>\begin{align}<br>k (f({\bf x_k })-f({\bf x^ *})) &amp; \le \frac{1}{2 \alpha} (\Vert { \bf x_0} - {\bf x^ *} \Vert ^2 - \Vert{\bf x_k}- {\bf x^ *} \Vert^2) + \frac {L \alpha-1}{2\alpha}\sum^{k-1} _ { i = 0 } \Vert {\bf x _ {i+1} } - {\bf x_i} \Vert^2<br>\\ &amp; \le \frac{1}{2 \alpha} \Vert { \bf x_0} - { \bf x^ * } \Vert^2 + \frac{L \alpha-1}{2 \alpha} \sum^{ \infty} _ {i=0} \Vert {\bf x _ {i+1} } - {\bf x_i} \Vert^2<br>\\ &amp; \le  \frac{1}{2 \alpha} \Vert {\bf x_0} - {\bf x^ *} \Vert^2 + \frac{L \alpha-1}{2 \alpha}\ \frac{2\alpha}{2-L\alpha} (f({\bf x_0})-f({\bf x^ *})) (Lemma \ 2)<br>\end{align}<br>$$</p><p>Remark: $\Vert {\bf x_k} - {\bf x^ *} \Vert$ doesnâ€™t always converge to 0.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æœºå™¨å­¦ä¹ ç¬”è®°ã€‘1. Linear Regression</title>
      <link href="/ml-linear-regression/"/>
      <url>/ml-linear-regression/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†è‡ªåŒå­¦çš„ç¬”è®°</p></blockquote><h3 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h3><p>Given a data set $ \{ ( \mathbf{x}_i, y_i ) \} _ { i = 1 } ^ n $, where  $\mathbf{x}_i \in \mathbb{R}^{d+1}$ and $y_i \in \mathbb{R}$.</p><h4 id="Linear-Regression-by-Least-Squares"><a href="#Linear-Regression-by-Least-Squares" class="headerlink" title="Linear Regression by Least Squares"></a>Linear Regression by Least Squares</h4><p>$$<br>y_i = \mathbf{w}^T \mathbf{x}_i,<br>$$</p><p>where $ \mathbf{x} _ i = (1, x_{ i1}, x_{i2}, \cdots , x_{id})^T $ and $ \mathbf{w} = (w_0, w_1, \cdots , w_d)^T $.</p><p>Average Fitting error is</p><p>$$<br>\begin{align}<br>L &amp;= \frac{1}{n} \sum_i^n(y_i - \mathbf{w}^T\mathbf{x}_i)^2 \\<br>&amp;= \frac{1}{n} \Vert \mathbf{y-\bar{X}w} \Vert ^2<br>\end{align}<br>$$</p><p>where $\mathbf{y}=(y_i, \cdots , y_n) $ and $\mathbf{\bar{X}} \in \mathbb{R}^{n \times (d+1)}$.</p><p>$$<br>0 = \left. \frac{\partial L}{\partial \mathbf{w}}\right|_\mathbf{w=\hat{w}}=-\frac{2}{n}\mathbf{\bar{X}}^T(\mathbf{y}-\mathbf{\bar{X}\hat{w}}) \Rightarrow \mathbf{\hat{w}}= (\mathbf{\bar{X}}^T\mathbf{\bar{X}})^{-1}\mathbf{\bar{X}}^T\mathbf{y}<br>$$</p><p>$$<br>\mathbf{\hat{y}} =\mathbf{\bar{X}}(\mathbf{\bar{X}}^T\mathbf{\bar{X}})^{-1}\mathbf{\bar{X}}^T\mathbf{y}<br>$$</p><p>Projection matrix $ P = \mathbf{\bar{X}}(\mathbf{\bar{X}}^T\mathbf{\bar{X}})^{-1}\mathbf{\bar{X}}^T$ projects an arbitrary vector to the column space of $\mathbf{\bar{X}}$.</p><h4 id="Linear-Regression-by-Maximum-Likelihood"><a href="#Linear-Regression-by-Maximum-Likelihood" class="headerlink" title="Linear Regression by Maximum Likelihood"></a>Linear Regression by Maximum Likelihood</h4><p>$$<br>y_i = \mathbf{w}^T\mathbf{x}_i + \epsilon_i ,<br>$$</p><p>å‡è®¾$ \mathbf{w} $ä¸$ \mathbf{x}_i$ç»™å®šã€‚</p><p><strong>Assumption 1</strong>:  $\epsilon_i \sim \cal{N}(0, \sigma^2)$,  $y_i |\mathbf{x}_i, \mathbf{w}, \sigma \sim \mathcal{N}(\mathbf{w}^T\mathbf{x}_i, \sigma^2)$.</p><p><strong>Assumption 2</strong>: IID. $P((\mathbf{x}_1, y_2),\cdots ,(\mathbf{x}_n, y_n)) = \prod_iP((\mathbf{x}_i, y_i))$.<br>$$<br>\begin{align}<br>L &amp;= P(y_1, \cdots , y_n | \mathbf{x}_1, \cdots, \mathbf{x}_n, \mathbf{w}, \sigma) \\<br> &amp;= \frac{P((\mathbf{x}_1, y_2), \cdots ,(\mathbf{x}_n, y_n)|\mathbf{w}, \sigma)}{P(\mathbf{x} _ 1, \cdots ,\mathbf{x}_n|\mathbf{w}, \sigma)}\\<br>&amp;=\frac{\prod _ {i=1} ^n P(\mathbf{x}_i, y_i|{\bf w}, \sigma)}{\prod _ {i=1}^n P(\mathbf{x}_i|{\bf w}, \sigma)} \\<br> &amp;= \prod _ {i=1}^n P(y_i|{\bf x},{\bf w}, \sigma)<br>\end{align}<br>$$</p><p>$$<br>\begin{align}<br>\log L &amp;= \sum_i^n \log (\frac{1}{\sqrt{2 \pi \sigma^2}}\exp{\frac{1}{2\sigma^2}(y_i-{\bf w}^T{\bf x}_i)^2})\\<br>&amp;=-\frac{n}{2}\log 2\pi - n \log \sigma + \frac{1}{2\sigma^2}\sum_i^n(y_i-{\bf w}^T{\bf x}_i)^2<br>\end{align}<br>$$</p><p>$$<br>\begin{align}<br>0 &amp;=\left. \frac{\partial \log L}{\partial {\bf w} } \right|_ \mathbf{w=\hat{w}} \\<br>&amp;=\frac{1}{\sigma^2}\sum_{i=1}^n{\bf x}_i y_i - {\bf x}_i{\bf x}_i^T{\bf \hat{w} } \\<br>&amp;=\frac{1}{\sigma^2}(\mathbf{\bar{X}}^T\mathbf{y}-{\bf \bar{X} }^T\mathbf{\bar{X}\hat{w} })) \\<br>&amp; \Rightarrow \mathbf{\hat{w} }= (\mathbf{\bar{X} }^T\mathbf{\bar{X} })^{-1}\mathbf{\bar{X} }^T\mathbf{y}<br>\end{align}<br>$$</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è®ºæ–‡é˜…è¯»ã€‘Deep Code Search</title>
      <link href="/deep-code-search/"/>
      <url>/deep-code-search/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€ASEé«˜çº§è½¯ä»¶å·¥ç¨‹ã€‘ç¬¬äºŒæ¬¡ç»“å¯¹ä½œä¸šCode Searchè®ºæ–‡é˜…è¯»ç¬”è®°</p></blockquote><h2 id="Deep-Code-Search"><a href="#Deep-Code-Search" class="headerlink" title="Deep Code Search"></a>Deep Code Search</h2><h3 id="ABSTRACT"><a href="#ABSTRACT" class="headerlink" title="ABSTRACT"></a>ABSTRACT</h3><ul><li><p>we propose a novel deep neural network named <strong>CODEnn</strong>ï¼ˆCode-Description Embedding Neural Networkï¼‰.</p></li><li><p>CODEnn jointly embeds code snippets and natural language descriptions into a high-dimensional vector space.</p></li><li><p>we implement a code search tool named <strong>DeepCS</strong>. </p></li></ul><h3 id="1-INTRODUCTION"><a href="#1-INTRODUCTION" class="headerlink" title="1.  INTRODUCTION"></a>1.  INTRODUCTION</h3><p><strong>Other Approaches:</strong>  </p><ul><li><p>information retrievalï¼ˆIRï¼‰techniques.</p></li><li><p>problem: mismatch between the high-level intent reï¬‚ected in the natural language queries and low-level implementation details in the source code.</p></li></ul><p><strong>Our Method:</strong></p><ul><li><p>CODEnn jointly embeds code snippets and natural language descriptions into a high-dimensional vector space</p></li><li><p>DeepCS trains the CODEnn model on a corpus of 18.2 million Java code snippetsï¼ˆin the form of commented methodsï¼‰from GitHub.   </p></li><li><p>DeepCS reads code snippets from a codebase and embeds them into vectors using the trained CODEnn.</p></li><li><p>when a user query arrives, DeepCS fnds code snippets that have the nearest vectors to the query vector and return them. </p></li></ul><p><strong>Evalutate:</strong></p><ul><li>we perform code search on a search codebase using 50 real-world queries obtained from Stack Overï¬‚ow.  </li></ul><h3 id="2-BACKGROUND"><a href="#2-BACKGROUND" class="headerlink" title="2.  BACKGROUND"></a>2.  BACKGROUND</h3><p><strong>Embedding:</strong> a technique for learning vector representations of entities.</p><p><strong>Word Embedding:</strong> It represents words as fixed-length vectors so that similar words are close<br>to each other in the vector space.</p><p><strong>Sequence Embedding:</strong> Use RNN. The embedding vector of the sentence is summarized from the hidden states $h_1, â€¦, h_T$ï¼ˆselect the last state or use maxpoolingï¼‰. </p><p><strong>Joint Embedding:</strong> a technique to jointly embed/correlate heterogeneous data into a unifed vector space so that semantically similar concepts across the two modalities occupy nearby regions of the space.<br>$$<br>\cal{X}\xrightarrow{\phi}\it{V}_\cal{X}\rightarrow \it{J}(\it{V}_\cal{X},\it{V}_\cal{Y})\leftarrow \it{V}_\cal{Y} \xleftarrow{\psi}\cal{Y}<br>$$<br><img src="joint-embeding.png" alt="An example of joint embedding"></p><h3 id="3-A-DEEP-NEURAL-NETWORK-FOR-CODE-SEARCH"><a href="#3-A-DEEP-NEURAL-NETWORK-FOR-CODE-SEARCH" class="headerlink" title="3.  A DEEP NEURAL NETWORK FOR CODE SEARCH"></a>3.  A DEEP NEURAL NETWORK FOR CODE SEARCH</h3><p><img src="CODEnn.png" alt="The structrue of CODEnn"></p><p><strong>Architecture:</strong></p><ul><li><p>Code Embedding Network: It embeds source code into vectors.ï¼ˆThree parts: the method name, the API invocation sequence, and the tokens contained in the source codeï¼‰</p></li><li><p>Description Embedding Network: It embeds natural language descriptions into<br>vectors. </p></li><li><p>Similarity Module: cosine similarity.</p></li></ul><p><strong>Training:</strong></p><ul><li><p>Training Instance: $\langle C, D+, D-\rangle$. D+ is a postitive description of code snippet C. D- is a negtive description of C(chosen randomly). </p></li><li><p>Loss: $\cal{L}(\theta) = \sum\limits_{\langle C, D+, D-\rangle \in P} max(0, \epsilon - cos(\mathbf{c}, \mathbf{d+})+cos(\mathbf{c}, \mathbf{d-})) $</p></li></ul><h3 id="4-DEEPCS-DEEP-LEARNING-BASED-CODE-SEARCH"><a href="#4-DEEPCS-DEEP-LEARNING-BASED-CODE-SEARCH" class="headerlink" title="4.  DEEPCS: DEEP LEARNING BASED CODE SEARCH"></a>4.  DEEPCS: DEEP LEARNING BASED CODE SEARCH</h3><p><strong>Extracion:</strong> </p><p><img src="extraction.png" alt="An example of extracting code elements"></p><p>We build the training tuples using Java methods that have documentation comments from open-source projects on GitHub.</p><p><strong>Training and Searching:</strong></p><p><img src="workflow.png" alt="The overall workflow of DeepCS"></p><h3 id="5-EVALUATION"><a href="#5-EVALUATION" class="headerlink" title="5.  EVALUATION"></a>5.  EVALUATION</h3><p><strong>Search Codebase:</strong> </p><p>Search codebase is different from the training corpus. They are considered in isolation and contain all codeï¼ˆincluding those do not have Javadoc commentsï¼‰.</p><p><strong>Performance Measure:</strong></p><ul><li>FRank: the rank of the first hit result in the result list.</li><li>SuccessRate@k: percentage of queries for which more than one correct<br>result could exist in the top k ranked resultsï¼ˆ$\frac{1}{|Q|}\sum\limits_{q=1}^{|Q|} \delta(FRank_q \leq k)$ï¼‰.</li><li>Precision@k: percentage of relevant results in the top k returned results for each query.</li><li>MRRï¼šthe average of the reciprocal ranks of results of a set of queriesï¼ˆ$\frac{1}{|Q|}\sum\limits_{q=1}^{|Q|} \frac{1}{FRank_q}$ï¼‰.</li></ul><p><strong>Results:</strong></p><img src="The statistical comparison.png" alt="The statistical comparison" style="zoom:67%;"><p>The symbol â€˜+â€™ indicates the average value.</p><img src="accuracy.png" alt="Overall Accuracy" style="zoom:67%;"><h3 id="6-DISCUSSION"><a href="#6-DISCUSSION" class="headerlink" title="6.  DISCUSSION"></a>6.  DISCUSSION</h3><p><strong>Strengths:</strong></p><ul><li>It has the ability to recognize query semantics (e.g., <em>queue an event to be run on the thread*â€‹ and *run an event on a thread queue</em>)</li><li>Its search results are less affected by irrevant or noisy keyword (e.g., <em>get the content<br>of an input stream as a string using a specified character encoding</em>).</li><li>it not only seeks snippets with matched keywords but also recommends those without matched keywords but are semantically related.</li></ul><p><strong>Why does DeepCS Work?</strong></p><ul><li>A unifed representation of heterogeneous data.</li><li>Better query understanding through deep learning.</li><li>Clustering snippets by natural language semantics.</li></ul><p><strong>Limitation:</strong></p><p>It sometimes ranks partially relevant results higher than the exact matching ones. This<br>is because DeepCS ranks results by just considering their semantic vectors.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Paper Reading </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code search </tag>
            
            <tag> deep learning </tag>
            
            <tag> nlp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºè¯•æ¨¡æ¿æ•´ç†</title>
      <link href="/code-template/"/>
      <url>/code-template/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯å½“æ—¶æˆ‘å»å‚åŠ æ¸…åè®¡ç®—æœºç³»å¤ä»¤è¥æ—¶ä¸ºæœºè€ƒå‡†å¤‡çš„æ¨¡æ¿ï¼Œéƒ¨åˆ†å‚è€ƒé“¾æ¥åœ¨æœ€ååˆ—å‡º, æˆ‘æ•´ç†äº†æˆ‘è®¤ä¸ºå¸¸è§çš„ä¸€äº›ç®—æ³•ï¼Œé¡ºä¾¿æ”¹äº†æ”¹éƒ¨åˆ†ä»£ç é£æ ¼ï¼ˆå…¶å®ä¸»è¦æ˜¯åŠ ç©ºæ ¼hhhï¼‰ã€‚æœ€åæœºè¯•çš„æ—¶å€™å®é™…åªç”¨åˆ°äº†å…³äºå¼ºè¿é€šåˆ†é‡ç¼©ç‚¹çš„é‚£éƒ¨åˆ†ä»£ç ï¼Œè¯´èµ·æ¥é‚£éƒ¨åˆ†ä»£ç è¿˜æ˜¯æœºè¯•å‰ä¸€å¤©æ™šä¸Šåœ¨å®¾é¦†æ‰‹æŠ„çš„ï¼ˆæœç„¶æˆ‘æ€»èƒ½è€ƒå‰ç²¾å‡†æŠ¼é¢˜233333ï¼‰ã€‚</p><p>ä»Šå¹´æ¸…åæœºè¯•ä¸€åå¸¸æ€éš¾åº¦å¤§å¤§é™ä½ï¼Œæ»¡åˆ†çš„ä¼¼ä¹éƒ½æœ‰25%ï¼Œæˆ‘å½“æ—¶åœ¨æµ‹è¯•æ•°æ®ä¸Šä¹Ÿæ˜¯å–å¾—äº†æ»¡åˆ†ã€‚ä¸è¿‡æœ€åå› ä¸ºå…¶ä»–ä¸€äº›åŸå› ï¼Œä¹Ÿæ²¡æœ‰å»æŠ¥åæ¸…åä¹æœˆçš„æ¨å…ï¼Œä¹Ÿå°±æ²¡èƒ½å»æˆæ¸…åã€‚ä¸è¿‡è¿™äº›ç®—æ³•æ¨¡æ¿ä½œä¸ºå­¦ä¹ ææ–™è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼ˆè¯´ä¸å®šä»¥åä»€ä¹ˆæ—¶å€™åˆç”¨ä¸Šäº†ï¼‰ã€‚</p></blockquote><h2 id="0-å¤´æ–‡ä»¶"><a href="#0-å¤´æ–‡ä»¶" class="headerlink" title="0. å¤´æ–‡ä»¶"></a>0. å¤´æ–‡ä»¶</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _CRT_SBCURE_NO_DEPRECATE</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="1-ç»å…¸ç®—æ³•"><a href="#1-ç»å…¸ç®—æ³•" class="headerlink" title="1. ç»å…¸ç®—æ³•"></a>1. ç»å…¸ç®—æ³•</h2><h3 id="1-1-åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•"><a href="#1-1-åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•" class="headerlink" title="1.1. åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•"></a>1.1. åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |åŸƒå¼ç­›æ³•|</span></span><br><span class="line"><span class="comment">    |å¿«é€Ÿç­›é€‰ç´ æ•°|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> prime[maxn];  </span><br><span class="line"><span class="keyword">bool</span> is_prime[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sieve</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; ++i)</span><br><span class="line">        is_prime[i] = <span class="literal">true</span>;</span><br><span class="line">    is_prime[<span class="number">0</span>] = is_prime[<span class="number">1</span>] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i){   <span class="comment">// æ³¨æ„æ•°ç»„å¤§å°æ˜¯n</span></span><br><span class="line">        <span class="keyword">if</span>(is_prime[i]){</span><br><span class="line">            prime[p++] = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + i; j &lt;= n; j += i)  <span class="comment">// è½»å‰ªæï¼Œjå¿…å®šæ˜¯içš„å€æ•°</span></span><br><span class="line">                is_prime[j] = <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> p;   <span class="comment">// è¿”å›ç´ æ•°ä¸ªæ•°</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="1-2-å¿«é€Ÿå¹‚"><a href="#1-2-å¿«é€Ÿå¹‚" class="headerlink" title="1.2. å¿«é€Ÿå¹‚"></a>1.2. å¿«é€Ÿå¹‚</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;   <span class="comment">// è§†æ•°æ®å¤§å°çš„æƒ…å†µè€Œå®š</span></span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">powerMod</span><span class="params">(LL x, LL n, LL m)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    LL res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt; <span class="number">0</span>){</span><br><span class="line">        <span class="keyword">if</span>  (n &amp; <span class="number">1</span>) <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå¥‡æ•°ï¼Œè‹¥æ˜¯åˆ™true</span></span><br><span class="line">            res = (res * x) % m;</span><br><span class="line">        x = (x * x) % m;</span><br><span class="line">        n  &gt;&gt;= <span class="number">1</span>;    <span class="comment">// ç›¸å½“äºn /= 2;</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="1-3-å¤§æ•°æ¨¡æ‹Ÿ"><a href="#1-3-å¤§æ•°æ¨¡æ‹Ÿ" class="headerlink" title="1.3. å¤§æ•°æ¨¡æ‹Ÿ"></a>1.3. å¤§æ•°æ¨¡æ‹Ÿ</h3><h4 id="1-3-1-å¤§æ•°åŠ æ³•"><a href="#1-3-1-å¤§æ•°åŠ æ³•" class="headerlink" title="1.3.1. å¤§æ•°åŠ æ³•"></a>1.3.1. å¤§æ•°åŠ æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |å¤§æ•°æ¨¡æ‹ŸåŠ æ³•|</span></span><br><span class="line"><span class="comment">    |ç”¨stringæ¨¡æ‹Ÿ|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">add1</span><span class="params">(<span class="built_in">string</span> s1, <span class="built_in">string</span> s2)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (s1 == <span class="string">""</span> &amp;&amp; s2 == <span class="string">""</span>)   <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">    <span class="keyword">if</span> (s1 == <span class="string">""</span>)   <span class="keyword">return</span> s2;</span><br><span class="line">    <span class="keyword">if</span> (s2 == <span class="string">""</span>)   <span class="keyword">return</span> s1;</span><br><span class="line">    <span class="built_in">string</span> maxx = s1, minn = s2;</span><br><span class="line">    <span class="keyword">if</span> (s1.length() &lt; s2.length()){</span><br><span class="line">        maxx = s2;</span><br><span class="line">        minn = s1;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> a = maxx.length() - <span class="number">1</span>, b = minn.length() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = b; i &gt;= <span class="number">0</span>; --i){</span><br><span class="line">        maxx[a--] += minn[i] - <span class="string">'0'</span>; <span class="comment">// aä¸€ç›´åœ¨å‡ ï¼Œ é¢å¤–è¿˜è¦å‡ä¸ª'0'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = maxx.length()<span class="number">-1</span>; i &gt; <span class="number">0</span>;--i){</span><br><span class="line">        <span class="keyword">if</span> (maxx[i] &gt; <span class="string">'9'</span>){</span><br><span class="line">            maxx[i] -= <span class="number">10</span>;<span class="comment">//æ³¨æ„è¿™ä¸ªæ˜¯å‡10</span></span><br><span class="line">            maxx[i - <span class="number">1</span>]++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (maxx[<span class="number">0</span>] &gt; <span class="string">'9'</span>){</span><br><span class="line">        maxx[<span class="number">0</span>] -= <span class="number">10</span>;</span><br><span class="line">        maxx = <span class="string">'1'</span> + maxx;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> maxx;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="1-3-2-å¤§æ•°é˜¶ä¹˜"><a href="#1-3-2-å¤§æ•°é˜¶ä¹˜" class="headerlink" title="1.3.2. å¤§æ•°é˜¶ä¹˜"></a>1.3.2. å¤§æ•°é˜¶ä¹˜</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |å¤§æ•°æ¨¡æ‹Ÿé˜¶ä¹˜|</span></span><br><span class="line"><span class="comment">|ç”¨æ•°ç»„æ¨¡æ‹Ÿ|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> num[maxn], len;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    åœ¨multå‡½æ•°ä¸­ï¼Œå½¢å‚éƒ¨åˆ†ï¼šlenæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œnè¡¨ç¤ºæ¯æ¬¡è¦ä¹˜ä»¥çš„æ•°ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ç»“æœçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">    tip: é˜¶ä¹˜éƒ½æ˜¯å…ˆæ±‚ä¹‹å‰çš„(n-1)!æ¥æ±‚n!</span></span><br><span class="line"><span class="comment">    åˆå§‹åŒ–Initå‡½æ•°å¾ˆé‡è¦ï¼Œä¸è¦è½ä¸‹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span> </span>{</span><br><span class="line">    len = <span class="number">1</span>;</span><br><span class="line">    num[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mult</span><span class="params">(<span class="keyword">int</span> num[], <span class="keyword">int</span> len, <span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    LL tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(LL i = <span class="number">0</span>; i &lt; len; ++i) {</span><br><span class="line">         tmp = tmp + num[i] * n;    <span class="comment">//ä»æœ€ä½ä½å¼€å§‹ï¼Œç­‰å·å·¦è¾¹çš„tmpè¡¨ç¤ºå½“å‰ä½ï¼Œå³è¾¹çš„tmpè¡¨ç¤ºè¿›ä½ï¼ˆä¹‹å‰è¿›çš„ä½ï¼‰</span></span><br><span class="line">         num[i] = tmp % <span class="number">10</span>; <span class="comment">// ä¿å­˜åœ¨å¯¹åº”çš„æ•°ç»„ä½ç½®ï¼Œå³å»æ‰è¿›ä½åçš„ä¸€ä½æ•°</span></span><br><span class="line">         tmp = tmp / <span class="number">10</span>;    <span class="comment">// å–æ•´ç”¨äºå†æ¬¡å¾ªç¯,ä¸nå’Œä¸‹ä¸€ä¸ªä½ç½®çš„ä¹˜ç§¯ç›¸åŠ </span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span>(tmp) {    <span class="comment">// ä¹‹åçš„è¿›ä½å¤„ç†</span></span><br><span class="line">         num[len++] = tmp % <span class="number">10</span>;</span><br><span class="line">         tmp = tmp / <span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    Init();</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    n = <span class="number">1977</span>; <span class="comment">// æ±‚çš„é˜¶ä¹˜æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) {</span><br><span class="line">        len = mult(num, len, i);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>,num[i]);    <span class="comment">// ä»æœ€é«˜ä½ä¾æ¬¡è¾“å‡º,æ•°æ®æ¯”è¾ƒå¤šé‡‡ç”¨printfè¾“å‡º</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="1-4-æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰"><a href="#1-4-æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰" class="headerlink" title="1.4. æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰"></a>1.4. æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |è¾—è½¬ç›¸é™¤æ³•|</span></span><br><span class="line"><span class="comment">    |æ¬§å‡ é‡Œå¾—ç®—æ³•|</span></span><br><span class="line"><span class="comment">|æ±‚æœ€å¤§å…¬çº¦æ•°|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> big, <span class="keyword">int</span> small)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (small &gt; big) </span><br><span class="line">        swap(big, small);</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">while</span> (small != <span class="number">0</span>){ <span class="comment">// è¾—è½¬ç›¸é™¤æ³•</span></span><br><span class="line">        <span class="keyword">if</span> (small &gt; big) </span><br><span class="line">            swap(big, small);</span><br><span class="line">        temp = big % small;</span><br><span class="line">        big = small;</span><br><span class="line">        small = temp;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span>(big);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="1-5-æœ€å°å…¬å€æ•°ï¼ˆLCMï¼‰"><a href="#1-5-æœ€å°å…¬å€æ•°ï¼ˆLCMï¼‰" class="headerlink" title="1.5. æœ€å°å…¬å€æ•°ï¼ˆLCMï¼‰"></a>1.5. æœ€å°å…¬å€æ•°ï¼ˆLCMï¼‰</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcm</span> <span class="params">(<span class="keyword">int</span> big, <span class="keyword">int</span> small)</span> </span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">return</span> big * small / gcd(big, small);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="1-6-å…¨æ’åˆ—"><a href="#1-6-å…¨æ’åˆ—" class="headerlink" title="1.6. å…¨æ’åˆ—"></a>1.6. å…¨æ’åˆ—</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |æ±‚1åˆ°nçš„å…¨æ’åˆ—, æœ‰æ¡ä»¶|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pern</span><span class="params">(<span class="keyword">int</span> <span class="built_in">list</span>[], <span class="keyword">int</span> k, <span class="keyword">int</span> n)</span> </span>{   <span class="comment">// kè¡¨ç¤ºå‰kä¸ªæ•°ä¸åŠ¨ä»…ç§»åŠ¨åé¢n-kä½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (k == n - <span class="number">1</span>) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, <span class="built_in">list</span>[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    } </span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = k; i &lt; n; i++) {   <span class="comment">// è¾“å‡ºçš„æ˜¯æ»¡è¶³ç§»åŠ¨æ¡ä»¶æ‰€æœ‰å…¨æ’åˆ—</span></span><br><span class="line">            swap(<span class="built_in">list</span>[k], <span class="built_in">list</span>[i]);</span><br><span class="line">            Pern(<span class="built_in">list</span>, k + <span class="number">1</span>, n);</span><br><span class="line">            swap(<span class="built_in">list</span>[k], <span class="built_in">list</span>[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="1-7-äºŒåˆ†æœç´¢"><a href="#1-7-äºŒåˆ†æœç´¢" class="headerlink" title="1.7. äºŒåˆ†æœç´¢"></a>1.7. äºŒåˆ†æœç´¢</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |äºŒåˆ†æœç´¢|</span></span><br><span class="line"><span class="comment">    |è¦æ±‚ï¼šå…ˆæ’åº|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// leftä¸ºæœ€å¼€å§‹å…ƒç´ , rightæ˜¯æœ«å°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ•°ï¼Œxæ˜¯è¦æ‰¾çš„æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch</span><span class="params">(<span class="keyword">int</span> *A, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right){</span><br><span class="line">        m = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (A[m] &gt;= x)  </span><br><span class="line">            right = m;   </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            left = m + <span class="number">1</span>;    </span><br><span class="line">        <span class="comment">// å¦‚æœè¦æ›¿æ¢ä¸º upper_bound, æ”¹ä¸º if (A[m] &lt;= v) x = m+1; else y = m;     </span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æœ€åleft == right  </span></span><br><span class="line"><span class="comment">    å¦‚æœæ‰¾æœ‰å¤šå°‘çš„xï¼Œå¯ä»¥ç”¨lower_boundæŸ¥æ‰¾ä¸€éï¼Œupper_boundæŸ¥æ‰¾ä¸€éï¼Œä¸‹æ ‡ç›¸å‡ã€‚ </span></span><br><span class="line"><span class="comment">    cppè‡ªå¸¦çš„lower_bound(a,a+n,x)è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªxçš„åœ°å€, upper_bound(a,a+n,x)è¿”å›æ•°ç»„ä¸­æœ€åä¸€ä¸ªxçš„ä¸‹ä¸€ä¸ªæ•°çš„åœ°å€ã€‚å¦‚æœa+nå†…æ²¡æœ‰æ‰¾åˆ°xæˆ–xçš„ä¸‹ä¸€ä¸ªåœ°å€ï¼Œè¿”å›a+nçš„åœ°å€  </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure><h2 id="2-æ•°æ®ç»“æ„"><a href="#2-æ•°æ®ç»“æ„" class="headerlink" title="2. æ•°æ®ç»“æ„"></a>2. æ•°æ®ç»“æ„</h2><h3 id="2-1-å¹¶æŸ¥é›†"><a href="#2-1-å¹¶æŸ¥é›†" class="headerlink" title="2.1. å¹¶æŸ¥é›†"></a>2.1. å¹¶æŸ¥é›†</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |åˆå¹¶èŠ‚ç‚¹æ“ä½œ|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> father[maxn];   <span class="comment">// å‚¨å­˜içš„fatherçˆ¶èŠ‚ç‚¹  </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">makeSet</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; i++)   </span><br><span class="line">        father[i] = i;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findRoot</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{   <span class="comment">// è¿­ä»£æ‰¾æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> root = x; <span class="comment">// æ ¹èŠ‚ç‚¹  </span></span><br><span class="line">    <span class="keyword">while</span> (root != father[root]) { <span class="comment">// å¯»æ‰¾æ ¹èŠ‚ç‚¹  </span></span><br><span class="line">        root = father[root];  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">while</span> (x != root) {  </span><br><span class="line">        <span class="keyword">int</span> tmp = father[x];  </span><br><span class="line">        father[x] = root; <span class="comment">// æ ¹èŠ‚ç‚¹èµ‹å€¼  </span></span><br><span class="line">        x = tmp;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> root;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findRoot</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{   <span class="comment">// è¿­ä»£æ‰¾æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (x == father[x])</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> father[x] = findRoot(father[x]);</span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{  <span class="comment">// å°†xæ‰€åœ¨çš„é›†åˆå’Œyæ‰€åœ¨çš„é›†åˆæ•´åˆèµ·æ¥å½¢æˆä¸€ä¸ªé›†åˆã€‚  </span></span><br><span class="line">    <span class="keyword">int</span> a, b;  </span><br><span class="line">    a = findRoot(x);  </span><br><span class="line">    b = findRoot(y);  </span><br><span class="line">    father[a] = b;  <span class="comment">// yè¿åœ¨xçš„æ ¹èŠ‚ç‚¹ä¸Š   æˆ–father[b] = aä¸ºxè¿åœ¨yçš„æ ¹èŠ‚ç‚¹ä¸Šï¼›  </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-2-æœ€å°ç”Ÿæˆæ ‘"><a href="#2-2-æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="2.2. æœ€å°ç”Ÿæˆæ ‘"></a>2.2. æœ€å°ç”Ÿæˆæ ‘</h3><h4 id="2-2-1-Kruskalç®—æ³•"><a href="#2-2-1-Kruskalç®—æ³•" class="headerlink" title="2.2.1. Kruskalç®—æ³•"></a>2.2.1. Kruskalç®—æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |Kruskalç®—æ³•|</span></span><br><span class="line"><span class="comment">    |é€‚ç”¨äºç¨€ç–å›¾|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç¬¬ä¸€æ­¥ï¼šç‚¹ã€è¾¹ã€åŠ å…¥vectorï¼ŒæŠŠæ‰€æœ‰è¾¹æŒ‰ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="comment">    ç¬¬äºŒæ­¥ï¼šå¹¶æŸ¥é›†éƒ¨åˆ† + ä¸‹é¢çš„code</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Kruskal</span><span class="params">()</span> </span>{    </span><br><span class="line">    ans = <span class="number">0</span>;    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) {    </span><br><span class="line">        <span class="keyword">if</span> (Find(edge[i].a) != Find(edge[i].b)) {    </span><br><span class="line">            Union(edge[i].a, edge[i].b);    </span><br><span class="line">            ans += edge[i].len;    </span><br><span class="line">        }    </span><br><span class="line">    }    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="2-2-2-Primç®—æ³•"><a href="#2-2-2-Primç®—æ³•" class="headerlink" title="2.2.2. Primç®—æ³•"></a>2.2.2. Primç®—æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |Primç®—æ³•|</span></span><br><span class="line"><span class="comment">    |é€‚ç”¨äºç¨ å¯†å›¾|</span></span><br><span class="line"><span class="comment">    |å †ä¼˜åŒ–ç‰ˆï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(elgn)|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//ä¼˜å…ˆé˜Ÿåˆ—è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cmp</span> {</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> &amp;a, <span class="keyword">int</span> &amp;b)</span> <span class="keyword">const</span> </span>{</span><br><span class="line"><span class="keyword">return</span> a &lt; b;</span><br><span class="line">}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span>  </span><br><span class="line">    <span class="keyword">int</span> v, len;  </span><br><span class="line">    node(<span class="keyword">int</span> v = <span class="number">0</span>, <span class="keyword">int</span> len = <span class="number">0</span>) :v(v), len(len) {}  </span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node &amp;a) <span class="keyword">const</span> {  <span class="comment">// åŠ å…¥é˜Ÿåˆ—çš„å…ƒç´ è‡ªåŠ¨æŒ‰è·ç¦»ä»å°åˆ°å¤§æ’åº  </span></span><br><span class="line">        <span class="keyword">return</span> len &gt; a.len;  </span><br><span class="line">    }  </span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[maxn];</span><br><span class="line"><span class="keyword">int</span> vis[maxn];</span><br><span class="line"><span class="keyword">int</span> dis[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; i++) {  </span><br><span class="line">        G[i].clear();  </span><br><span class="line">        dis[i] = INF;  </span><br><span class="line">        vis[i] = <span class="literal">false</span>;  </span><br><span class="line">    }  </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Prim</span><span class="params">(<span class="keyword">int</span> s)</span> </span>{  </span><br><span class="line">    priority_queue&lt;node&gt; Q; <span class="comment">// å®šä¹‰ä¼˜å…ˆé˜Ÿåˆ—  </span></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;  </span><br><span class="line">    Q.push(node(s,<span class="number">0</span>));  <span class="comment">// èµ·ç‚¹åŠ å…¥é˜Ÿåˆ—  </span></span><br><span class="line">    <span class="keyword">while</span> (!Q.empty()) {   </span><br><span class="line">        node now = Q.top(); </span><br><span class="line">Q.pop();  <span class="comment">// å–å‡ºè·ç¦»æœ€å°çš„ç‚¹  </span></span><br><span class="line">        <span class="keyword">int</span> v = now.v;  </span><br><span class="line">        <span class="keyword">if</span> (vis[v]) <span class="keyword">continue</span>;  <span class="comment">// åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯èƒ½ä¼šæ¨å…¥2æ¬¡æˆ–2æ¬¡ä»¥ä¸Šé˜Ÿåˆ—ï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªè¢«æ ‡è®°åï¼Œå‰©ä¸‹çš„éœ€è¦ç›´æ¥è·³è¿‡ã€‚  </span></span><br><span class="line">        vis[v] = <span class="literal">true</span>;  <span class="comment">// æ ‡è®°ä¸€ä¸‹  </span></span><br><span class="line">        ans += now.len;  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) {  <span class="comment">// å¼€å§‹æ›´æ–°  </span></span><br><span class="line">            <span class="keyword">int</span> v2 = G[v][i].v;  </span><br><span class="line">            <span class="keyword">int</span> len = G[v][i].len;  </span><br><span class="line">            <span class="keyword">if</span> (!vis[v2] &amp;&amp; dis[v2] &gt; len) {   </span><br><span class="line">                dis[v2] = len;  </span><br><span class="line">                Q.push(node(v2, dis[v2]));  <span class="comment">// æ›´æ–°çš„ç‚¹åŠ å…¥é˜Ÿåˆ—å¹¶æ’åº  </span></span><br><span class="line">            }  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> ans; </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-3-å•æºæœ€çŸ­è·¯å¾„"><a href="#2-3-å•æºæœ€çŸ­è·¯å¾„" class="headerlink" title="2.3. å•æºæœ€çŸ­è·¯å¾„"></a>2.3. å•æºæœ€çŸ­è·¯å¾„</h3><h4 id="2-3-1-Dijkstraç®—æ³•"><a href="#2-3-1-Dijkstraç®—æ³•" class="headerlink" title="2.3.1. Dijkstraç®—æ³•"></a>2.3.1. Dijkstraç®—æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |Dijkstraç®—æ³•|</span></span><br><span class="line"><span class="comment">    |é€‚ç”¨äºè¾¹æƒä¸ºæ­£çš„æœ‰å‘å›¾æˆ–è€…æ— å‘å›¾|</span></span><br><span class="line"><span class="comment">    |æ±‚ä»å•ä¸ªæºç‚¹å‡ºå‘ï¼Œåˆ°æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯|</span></span><br><span class="line"><span class="comment">    |ä¼˜åŒ–ç‰ˆï¼šæ—¶é—´å¤æ‚åº¦ O(elbn)|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span>  </span><br><span class="line">    <span class="keyword">int</span> v, len;  </span><br><span class="line">    node(<span class="keyword">int</span> v = <span class="number">0</span>, <span class="keyword">int</span> len = <span class="number">0</span>) :v(v), len(len) {}  </span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node &amp;a) <span class="keyword">const</span> {  <span class="comment">// è·ç¦»ä»å°åˆ°å¤§æ’åº  </span></span><br><span class="line">        <span class="keyword">return</span> len &gt; a.len;  </span><br><span class="line">    }  </span><br><span class="line">};  </span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt;G[maxn];  </span><br><span class="line"><span class="keyword">bool</span> vis[maxn];  </span><br><span class="line"><span class="keyword">int</span> dis[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;maxn; i++) {  </span><br><span class="line">        G[i].clear();  </span><br><span class="line">        vis[i] = <span class="literal">false</span>;  </span><br><span class="line">        dis[i] = INF;  </span><br><span class="line">    }  </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> e)</span> </span>{  </span><br><span class="line">    priority_queue&lt;node&gt; Q;  </span><br><span class="line">    Q.push(node(s, <span class="number">0</span>)); <span class="comment">// åŠ å…¥é˜Ÿåˆ—å¹¶æ’åº  </span></span><br><span class="line">    dis[s] = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">while</span> (!Q.empty()) {  </span><br><span class="line">        node now = Q.top();     <span class="comment">// å–å‡ºå½“å‰æœ€å°çš„  </span></span><br><span class="line">        Q.pop();  </span><br><span class="line">        <span class="keyword">int</span> v = now.v;  </span><br><span class="line">        <span class="keyword">if</span> (vis[v]) <span class="keyword">continue</span>;   <span class="comment">// å¦‚æœæ ‡è®°è¿‡äº†, ç›´æ¥continue  </span></span><br><span class="line">        vis[v] = <span class="literal">true</span>;  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) {   <span class="comment">// æ›´æ–°  </span></span><br><span class="line">            <span class="keyword">int</span> v2 = G[v][i].v;  </span><br><span class="line">            <span class="keyword">int</span> len = G[v][i].len;  </span><br><span class="line">            <span class="keyword">if</span> (!vis[v2] &amp;&amp; dis[v2] &gt; dis[v] + len) {  </span><br><span class="line">                dis[v2] = dis[v] + len;  </span><br><span class="line">                Q.push(node(v2, dis[v2]));  </span><br><span class="line">            }  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> dis[e];  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="2-3-2-SPFAç®—æ³•"><a href="#2-3-2-SPFAç®—æ³•" class="headerlink" title="2.3.2. SPFAç®—æ³•"></a>2.3.2. SPFAç®—æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ€çŸ­è·¯å¾„å¿«é€Ÿç®—æ³•ï¼ˆShortest Path Faster Algorithmï¼‰</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |SPFAç®—æ³•|</span></span><br><span class="line"><span class="comment">    |é˜Ÿåˆ—ä¼˜åŒ–|</span></span><br><span class="line"><span class="comment">    |å¯å¤„ç†è´Ÿç¯|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[maxn];</span><br><span class="line"><span class="keyword">bool</span> inqueue[maxn];</span><br><span class="line"><span class="keyword">int</span> dist[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>{  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i){  </span><br><span class="line">        G[i].clear();  </span><br><span class="line">        dist[i] = INF;  </span><br><span class="line">    }  </span><br><span class="line">}</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> e)</span>  </span></span><br><span class="line"><span class="function"></span>{  </span><br><span class="line">    <span class="keyword">int</span> v1, v2, weight;  </span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;  </span><br><span class="line">    <span class="built_in">memset</span>(inqueue, <span class="literal">false</span>, <span class="keyword">sizeof</span>(inqueue)); <span class="comment">// æ ‡è®°æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­  </span></span><br><span class="line">    <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt)); <span class="comment">// åŠ å…¥é˜Ÿåˆ—çš„æ¬¡æ•°  </span></span><br><span class="line">    dist[s] = <span class="number">0</span>;  </span><br><span class="line">    Q.push(s); <span class="comment">// èµ·ç‚¹åŠ å…¥é˜Ÿåˆ—  </span></span><br><span class="line">    inqueue[s] = <span class="literal">true</span>; <span class="comment">// æ ‡è®°  </span></span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()){  </span><br><span class="line">        v1 = Q.front();  </span><br><span class="line">        Q.pop();  </span><br><span class="line">        inqueue[v1] = <span class="literal">false</span>; <span class="comment">// å–æ¶ˆæ ‡è®°  </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v1].size(); ++i){ <span class="comment">// æœç´¢v1çš„é“¾è¡¨  </span></span><br><span class="line">            v2 = G[v1][i].vex;  </span><br><span class="line">            weight = G[v1][i].weight;  </span><br><span class="line">            <span class="keyword">if</span>(dist[v2] &gt; dist[v1] + weight){ <span class="comment">// æ¾å¼›æ“ä½œ  </span></span><br><span class="line">                dist[v2] = dist[v1] + weight;  </span><br><span class="line">                <span class="keyword">if</span>(inqueue[v2] == <span class="literal">false</span>){  <span class="comment">// å†æ¬¡åŠ å…¥é˜Ÿåˆ—  </span></span><br><span class="line">                    inqueue[v2] = <span class="literal">true</span>;  </span><br><span class="line">                    <span class="comment">//cnt[v2]++;  // åˆ¤è´Ÿç¯  </span></span><br><span class="line">                    <span class="comment">//if(cnt[v2] &gt; n) return -1;  </span></span><br><span class="line">                    Q.push(v2);  </span><br><span class="line">                } } }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> dist[e];  </span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸æ–­çš„å°†sçš„é‚»æ¥ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œå–å‡ºä¸æ–­çš„è¿›è¡Œæ¾å¼›æ“ä½œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º  </span></span><br><span class="line"><span class="comment">    å¦‚æœä¸€ä¸ªç»“ç‚¹è¢«åŠ å…¥é˜Ÿåˆ—è¶…è¿‡n-1æ¬¡ï¼Œé‚£ä¹ˆæ˜¾ç„¶å›¾ä¸­æœ‰è´Ÿç¯  </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure><h4 id="2-3-3-Floydç®—æ³•"><a href="#2-3-3-Floydç®—æ³•" class="headerlink" title="2.3.3. Floydç®—æ³•"></a>2.3.3. Floydç®—æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |Floydç®—æ³•|</span></span><br><span class="line"><span class="comment">    |ä»»æ„ç‚¹å¯¹æœ€çŸ­è·¯ç®—æ³•|</span></span><br><span class="line"><span class="comment">    |æ±‚å›¾ä¸­ä»»æ„ä¸¤ç‚¹çš„æœ€çŸ­è·ç¦»çš„ç®—æ³•|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {   <span class="comment">// åˆå§‹åŒ–ä¸º0  </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)  </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;dis[i][j]);  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++) {  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) {  </span><br><span class="line">            dis[i][j] = min(dis[i][j], dis[i][k] + dis[k][j]);  </span><br><span class="line">        }  </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-4-äºŒåˆ†å›¾"><a href="#2-4-äºŒåˆ†å›¾" class="headerlink" title="2.4. äºŒåˆ†å›¾"></a>2.4. äºŒåˆ†å›¾</h3><h4 id="2-4-1-æŸ“è‰²æ³•"><a href="#2-4-1-æŸ“è‰²æ³•" class="headerlink" title="2.4.1. æŸ“è‰²æ³•"></a>2.4.1. æŸ“è‰²æ³•</h4> <figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |äº¤å‰æŸ“è‰²æ³•åˆ¤æ–­äºŒåˆ†å›¾|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bipartite</span><span class="params">(<span class="keyword">int</span> s)</span> </span>{  </span><br><span class="line">    <span class="keyword">int</span> u, v;  </span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;  </span><br><span class="line">    color[s] = <span class="number">1</span>;  </span><br><span class="line">    Q.push(s);  </span><br><span class="line">    <span class="keyword">while</span> (!Q.empty()) {  </span><br><span class="line">        u = Q.front();  </span><br><span class="line">        Q.pop();  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].size(); i++) {  </span><br><span class="line">            v = G[u][i];  </span><br><span class="line">            <span class="keyword">if</span> (color[v] == <span class="number">0</span>) {  </span><br><span class="line">                color[v] = -color[u];  </span><br><span class="line">                Q.push(v);  </span><br><span class="line">            }  </span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (color[v] == color[u])  </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="2-4-2-åŒˆç‰™åˆ©ç®—æ³•"><a href="#2-4-2-åŒˆç‰™åˆ©ç®—æ³•" class="headerlink" title="2.4.2. åŒˆç‰™åˆ©ç®—æ³•"></a>2.4.2. åŒˆç‰™åˆ©ç®—æ³•</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |æ±‚è§£æœ€å¤§åŒ¹é…é—®é¢˜|</span></span><br><span class="line"><span class="comment">    |é€’å½’å®ç°|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];  </span><br><span class="line"><span class="keyword">bool</span> inpath[maxn];  <span class="comment">// æ ‡è®°  </span></span><br><span class="line"><span class="keyword">int</span> match[maxn];    <span class="comment">// è®°å½•åŒ¹é…å¯¹è±¡ </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="built_in">memset</span>(match, <span class="number">-1</span>, <span class="keyword">sizeof</span>(match));  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i) {  </span><br><span class="line">        G[i].clear();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">findpath</span><span class="params">(<span class="keyword">int</span> k)</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[k].size(); ++i) {  </span><br><span class="line">        <span class="keyword">int</span> v = G[k][i];  </span><br><span class="line">        <span class="keyword">if</span> (!inpath[v]) {  </span><br><span class="line">            inpath[v] = <span class="literal">true</span>;  </span><br><span class="line">            <span class="keyword">if</span> (match[v] == <span class="number">-1</span> || findpath(match[v])) { <span class="comment">// é€’å½’  </span></span><br><span class="line">                match[v] = k; <span class="comment">// å³åŒ¹é…å¯¹è±¡æ˜¯â€œkå¦¹å­â€çš„  </span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;  </span><br><span class="line">            }  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hungary</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) {  <span class="comment">// mä¸ºéœ€è¦åŒ¹é…çš„â€œå¦¹å­â€æ•°  </span></span><br><span class="line">        <span class="built_in">memset</span>(inpath, <span class="literal">false</span>, <span class="keyword">sizeof</span>(inpath)); <span class="comment">// æ¯æ¬¡éƒ½è¦åˆå§‹åŒ–  </span></span><br><span class="line">        <span class="keyword">if</span> (findpath(i)) cnt++;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; cnt &lt;&lt; <span class="built_in">endl</span>;  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |æ±‚è§£æœ€å¤§åŒ¹é…é—®é¢˜|</span></span><br><span class="line"><span class="comment">    |dfså®ç°|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> v1, v2;  </span><br><span class="line"><span class="keyword">bool</span> Map[<span class="number">501</span>][<span class="number">501</span>];  </span><br><span class="line"><span class="keyword">bool</span> visit[<span class="number">501</span>];  </span><br><span class="line"><span class="keyword">int</span> link[<span class="number">501</span>];  </span><br><span class="line"><span class="keyword">int</span> result;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">1</span>; y &lt;= v2; ++y) {  </span><br><span class="line">        <span class="keyword">if</span> (Map[x][y] &amp;&amp; !visit[y]) {  </span><br><span class="line">            visit[y] = <span class="literal">true</span>;  </span><br><span class="line">            <span class="keyword">if</span> (link[y] == <span class="number">0</span> || dfs(link[y])) {  </span><br><span class="line">                link[y] = x;  </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;  </span><br><span class="line">            } </span><br><span class="line">} </span><br><span class="line">}  </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search</span><span class="params">()</span>  </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">1</span>; x &lt;= v1; x++) {  </span><br><span class="line">        <span class="built_in">memset</span>(visit, <span class="literal">false</span>, <span class="keyword">sizeof</span>(visit));  </span><br><span class="line">        <span class="keyword">if</span> (dfs(x))  </span><br><span class="line">            result++;  </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="3-åŠ¨æ€è§„åˆ’"><a href="#3-åŠ¨æ€è§„åˆ’" class="headerlink" title="3. åŠ¨æ€è§„åˆ’"></a>3. åŠ¨æ€è§„åˆ’</h2><h3 id="3-1-èƒŒåŒ…é—®é¢˜"><a href="#3-1-èƒŒåŒ…é—®é¢˜" class="headerlink" title="3.1. èƒŒåŒ…é—®é¢˜"></a>3.1. èƒŒåŒ…é—®é¢˜</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |01èƒŒåŒ…|</span></span><br><span class="line"><span class="comment">    |å®Œå…¨èƒŒåŒ…|</span></span><br><span class="line"><span class="comment">|å¤šé‡èƒŒåŒ…|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 01èƒŒåŒ…ï¼š  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bag01</span><span class="params">(<span class="keyword">int</span> cost, <span class="keyword">int</span> weight)</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span>(i = v; i &gt;= cost; --i)  </span><br><span class="line">    dp[i] = max(dp[i], dp[i - cost] + weight);  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="comment">// å®Œå…¨èƒŒåŒ…ï¼š  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">complete</span><span class="params">(<span class="keyword">int</span> cost, <span class="keyword">int</span> weight)</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span>(i = cost; i &lt;= v; ++i)  </span><br><span class="line">    dp[i] = max(dp[i], dp[i - cost] + weight);  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šé‡èƒŒåŒ…ï¼š  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">multiply</span><span class="params">(<span class="keyword">int</span> cost, <span class="keyword">int</span> weight, <span class="keyword">int</span> amount)</span> </span>{  </span><br><span class="line">    <span class="keyword">if</span>(cost * amount &gt;= v)  </span><br><span class="line">        complete(cost, weight);  </span><br><span class="line">    <span class="keyword">else</span>{  </span><br><span class="line">        k = <span class="number">1</span>;  </span><br><span class="line">        <span class="keyword">while</span> (k &lt; amount){  </span><br><span class="line">            bag01(k * cost, k * weight);  </span><br><span class="line">            amount -= k;  </span><br><span class="line">            k += k;  </span><br><span class="line">        }  </span><br><span class="line">        bag01(cost * amount, weight * amount);  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰"><a href="#3-2-æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰" class="headerlink" title="3.2. æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰"></a>3.2. æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |æœ€é•¿ä¸Šå‡å­åºåˆ—|</span></span><br><span class="line"><span class="comment">    |çŠ¶æ€è½¬ç§»|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    çŠ¶æ€è½¬ç§»dp[i] = max{1, dp[j] + 1 };  j&lt;i; a[j]&lt;a[i];</span></span><br><span class="line"><span class="comment">    d[i]æ˜¯ä»¥iç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—</span></span><br><span class="line"><span class="comment">    ä¸iä¹‹å‰çš„ æ¯ä¸ªa[j]&lt;a[i]çš„ jçš„ä½ç½®çš„æœ€é•¿ä¸Šå‡å­åºåˆ—+1åçš„å€¼æ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>{   <span class="comment">// å‚è€ƒæŒ‘æˆ˜ç¨‹åºè®¾è®¡å…¥é—¨ç»å…¸;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i){  </span><br><span class="line">        dp[i] = <span class="number">1</span>;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j){  </span><br><span class="line">            <span class="keyword">if</span>(a[j] &lt; a[i]){  </span><br><span class="line">                dp[i] = max(dp[i], dp[j] + <span class="number">1</span>);  </span><br><span class="line">}</span><br><span class="line">} </span><br><span class="line">}</span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    ä¼˜åŒ–æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">    dp[i]è¡¨ç¤ºé•¿åº¦ä¸ºi+1çš„ä¸Šå‡å­åºåˆ—çš„æœ€æœ«å°¾å…ƒç´   </span></span><br><span class="line"><span class="comment">    æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”dpæœ«å°¾å¤§çš„æ¥ä»£æ›¿ </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i){</span><br><span class="line">        dp[i] = INF;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) {  </span><br><span class="line">        *lower_bound(dp, dp + n, a[i]) = a[i];  <span class="comment">// è¿”å›ä¸€ä¸ªæŒ‡é’ˆ  </span></span><br><span class="line">    }  </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *lower_bound(dp, dp + n, INF) - dp;  </span><br><span class="line">}</span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">    å‡½æ•°lower_bound()è¿”å›ä¸€ä¸ª iterator å®ƒæŒ‡å‘åœ¨[first,last)æ ‡è®°çš„æœ‰åºåºåˆ—ä¸­å¯ä»¥æ’å…¥valueï¼Œè€Œä¸ä¼šç ´åå®¹å™¨é¡ºåºçš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œè€Œè¿™ä¸ªä½ç½®æ ‡è®°äº†ä¸€ä¸ªä¸å°äºvalueçš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-3-æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰"><a href="#3-3-æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰" class="headerlink" title="3.3. æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰"></a>3.3. æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |æ±‚æœ€é•¿å…¬å…±å­åºåˆ—|</span></span><br><span class="line"><span class="comment">    |é€’æ¨å½¢å¼|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) {  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j) {  </span><br><span class="line">            <span class="keyword">if</span> (s1[i] == s2[j]) {  </span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j] + <span class="number">1</span>;  </span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {  </span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = max(dp[i][j + <span class="number">1</span>], dp[i + <span class="number">1</span>][j]);  </span><br><span class="line">            } </span><br><span class="line">        } </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-å­—ç¬¦ä¸²"><a href="#4-å­—ç¬¦ä¸²" class="headerlink" title="4. å­—ç¬¦ä¸²"></a>4. å­—ç¬¦ä¸²</h2><h3 id="4-1-kmpç®—æ³•"><a href="#4-1-kmpç®—æ³•" class="headerlink" title="4.1. kmpç®—æ³•"></a>4.1. kmpç®—æ³•</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    |kmpç®—æ³•|</span></span><br><span class="line"><span class="comment">    |å­—ç¬¦ä¸²åŒ¹é…|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getnext</span><span class="params">(<span class="keyword">char</span> str[maxn], <span class="keyword">int</span> nextt[maxn])</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>, k = <span class="number">-1</span>;</span><br><span class="line">    nextt[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; m) {</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">-1</span> || str[j] == str[k]) {</span><br><span class="line">            j++;</span><br><span class="line">            k++;</span><br><span class="line">            nextt[j] = k;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            k = nextt[k];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kmp</span><span class="params">(<span class="keyword">int</span> a[maxn], <span class="keyword">int</span> b[maxn])</span> </span>{    </span><br><span class="line">    <span class="keyword">int</span> nextt[maxm];    </span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;    </span><br><span class="line">    getnext(b, nextt);    </span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) {    </span><br><span class="line">        <span class="keyword">if</span> (j == <span class="number">-1</span> || a[i] == b[j]) { <span class="comment">// æ¯ä¸²ä¸åŠ¨ï¼Œå­ä¸²ç§»åŠ¨    </span></span><br><span class="line">            j++;    </span><br><span class="line">            i++;    </span><br><span class="line">        }    </span><br><span class="line">        <span class="keyword">else</span> {    </span><br><span class="line">            <span class="comment">// iä¸éœ€è¦å›æº¯äº†    </span></span><br><span class="line">            <span class="comment">// i = i - j + 1;    </span></span><br><span class="line">            j = nextt[j];    </span><br><span class="line">        }    </span><br><span class="line">        <span class="keyword">if</span> (j == m) {    </span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, i - m + <span class="number">1</span>); <span class="comment">// æ¯ä¸²çš„ä½ç½®å‡å»å­ä¸²çš„é•¿åº¦+1    </span></span><br><span class="line">            <span class="keyword">return</span>;    </span><br><span class="line">        }    </span><br><span class="line">    }    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-2-kmpæ‰©å±•ç®—æ³•"><a href="#4-2-kmpæ‰©å±•ç®—æ³•" class="headerlink" title="4.2. kmpæ‰©å±•ç®—æ³•"></a>4.2. kmpæ‰©å±•ç®—æ³•</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MM = <span class="number">100005</span>;    </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> next[MM], extend[MM];    </span><br><span class="line"><span class="keyword">char</span> S[MM], T[MM];    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetNext</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *T)</span> </span>{    </span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(T), a = <span class="number">0</span>;    </span><br><span class="line">    next[<span class="number">0</span>] = len;    </span><br><span class="line">    <span class="keyword">while</span>(a &lt; len - <span class="number">1</span> &amp;&amp; T[a] == T[a + <span class="number">1</span>]) a++;    </span><br><span class="line">    next[<span class="number">1</span>] = a;    </span><br><span class="line">    a = <span class="number">1</span>;    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">2</span>; k &lt; len; k++) {    </span><br><span class="line">        <span class="keyword">int</span> p = a + next[a] - <span class="number">1</span>, L = next[k - a];    </span><br><span class="line">        <span class="keyword">if</span>((k - <span class="number">1</span>) + L &gt;= p) {    </span><br><span class="line">            <span class="keyword">int</span> j = (p - k + <span class="number">1</span>) &gt; <span class="number">0</span> ? (p - k + <span class="number">1</span>) : <span class="number">0</span>;    </span><br><span class="line">            <span class="keyword">while</span>(k + j &lt; len &amp;&amp; T[k + j] == T[j]) j++;    </span><br><span class="line">            next[k] = j;    </span><br><span class="line">            a = k;    </span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            next[k] = L;    </span><br><span class="line">    }    </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetExtend</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *S, <span class="keyword">const</span> <span class="keyword">char</span> *T)</span> </span>{    </span><br><span class="line">    GetNext(T);    </span><br><span class="line">    <span class="keyword">int</span> slen = <span class="built_in">strlen</span>(S), tlen = <span class="built_in">strlen</span>(T), a = <span class="number">0</span>;    </span><br><span class="line">    <span class="keyword">int</span> MinLen = slen &lt; tlen ? slen : tlen;    </span><br><span class="line">    <span class="keyword">while</span>(a &lt; MinLen &amp;&amp; S[a] == T[a]) a++;    </span><br><span class="line">    extend[<span class="number">0</span>] = a;     </span><br><span class="line">    a = <span class="number">0</span>;    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt; slen; k++) {    </span><br><span class="line">        <span class="keyword">int</span> p = a + extend[a] - <span class="number">1</span>, L = next[k - a];    </span><br><span class="line">        <span class="keyword">if</span>((k - <span class="number">1</span>) + L &gt;= p) {    </span><br><span class="line">            <span class="keyword">int</span> j = (p - k + <span class="number">1</span>) &gt; <span class="number">0</span> ? (p - k + <span class="number">1</span>) : <span class="number">0</span>;    </span><br><span class="line">            <span class="keyword">while</span>(k + j &lt; slen &amp;&amp; j &lt; tlen &amp;&amp; S[k + j] == T[j]) j++;    </span><br><span class="line">            extend[k] = j;    </span><br><span class="line">            a = k;    </span><br><span class="line">        } </span><br><span class="line">        <span class="keyword">else</span>    </span><br><span class="line">            extend[k] = L;    </span><br><span class="line">    }    </span><br><span class="line">}    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> *s, <span class="keyword">int</span> len)</span></span>{    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)    </span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; s[i] &lt;&lt; <span class="string">' '</span>;    </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;    </span><br><span class="line">}    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{    </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; S &gt;&gt; T) {    </span><br><span class="line">        GetExtend(S, T);    </span><br><span class="line">        show(next, <span class="built_in">strlen</span>(T));    </span><br><span class="line">        show(extend, <span class="built_in">strlen</span>(S));    </span><br><span class="line">    }    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-å­—å…¸æ ‘"><a href="#5-å­—å…¸æ ‘" class="headerlink" title="5. å­—å…¸æ ‘"></a>5. å­—å…¸æ ‘</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span> {</span>  </span><br><span class="line">    <span class="keyword">int</span> cnt;  </span><br><span class="line">    Trie *next[maxn];  </span><br><span class="line">    Trie(){  </span><br><span class="line">        cnt = <span class="number">0</span>;  </span><br><span class="line">        <span class="built_in">memset</span>(next,<span class="number">0</span>,<span class="keyword">sizeof</span>(next));  </span><br><span class="line">    }  </span><br><span class="line">};  </span><br><span class="line"></span><br><span class="line">Trie *root;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">char</span> *word)</span> </span>{  </span><br><span class="line">    Trie *tem = root;  </span><br><span class="line">    <span class="keyword">while</span>(*word != <span class="string">'\0'</span>) {  </span><br><span class="line">        <span class="keyword">int</span> x = *word - <span class="string">'a'</span>;  </span><br><span class="line">        <span class="keyword">if</span>(tem-&gt;next[x] == <span class="literal">NULL</span>)  </span><br><span class="line">            tem-&gt;next[x] = <span class="keyword">new</span> Trie;  </span><br><span class="line">        tem = tem-&gt;next[x];  </span><br><span class="line">        tem-&gt;cnt++;  </span><br><span class="line">        word++;  </span><br><span class="line">    }  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search</span><span class="params">(<span class="keyword">char</span> *word)</span> </span>{  </span><br><span class="line">    Trie *tem = root;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; word[i] != <span class="string">'\0'</span>; i++) {  </span><br><span class="line">        <span class="keyword">int</span> x = word[i]-<span class="string">'a'</span>;  </span><br><span class="line">        <span class="keyword">if</span>(tem-&gt;next[x] == <span class="literal">NULL</span>)  </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">        tem = tem-&gt;next[x];  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> tem-&gt;cnt;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(<span class="keyword">char</span> *word, <span class="keyword">int</span> t)</span> </span>{  </span><br><span class="line">    Trie *tem = root;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; word[i] != <span class="string">'\0'</span>; i++) {  </span><br><span class="line">        <span class="keyword">int</span> x = word[i]-<span class="string">'a'</span>;  </span><br><span class="line">        tem = tem-&gt;next[x];  </span><br><span class="line">        (tem-&gt;cnt) -= t;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; i++)  </span><br><span class="line">        tem-&gt;next[i] = <span class="literal">NULL</span>;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">int</span> n;  </span><br><span class="line">    <span class="keyword">char</span> str1[<span class="number">50</span>];  </span><br><span class="line">    <span class="keyword">char</span> str2[<span class="number">50</span>];  </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n)!=EOF) {  </span><br><span class="line">        root = <span class="keyword">new</span> Trie;  </span><br><span class="line">        <span class="keyword">while</span>(n--) {  </span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s %s"</span>, str1, str2);  </span><br><span class="line">            <span class="keyword">if</span>(str1[<span class="number">0</span>] == <span class="string">'i'</span>) {</span><br><span class="line">                Insert(str2); </span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(str1[<span class="number">0</span>] == <span class="string">'s'</span>) {  </span><br><span class="line">                <span class="keyword">if</span>(Search(str2))  </span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);  </span><br><span class="line">                <span class="keyword">else</span>  </span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"No\n"</span>);  </span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {  </span><br><span class="line">                <span class="keyword">int</span> t = Search(str2);  </span><br><span class="line">                <span class="keyword">if</span>(t)  </span><br><span class="line">                    Delete(str2, t);  </span><br><span class="line">            } </span><br><span class="line">        } </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="6-çº¿æ®µæ ‘"><a href="#6-çº¿æ®µæ ‘" class="headerlink" title="6. çº¿æ®µæ ‘"></a>6. çº¿æ®µæ ‘</h2><h3 id="6-1-ç‚¹æ›´æ–°"><a href="#6-1-ç‚¹æ›´æ–°" class="headerlink" title="6.1. ç‚¹æ›´æ–°"></a>6.1. ç‚¹æ›´æ–°</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">int</span> left, right;</span><br><span class="line">    <span class="keyword">int</span> max, sum;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">node tree[maxn &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> k = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> p, q;</span><br><span class="line"><span class="built_in">string</span> str;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span><span class="comment">//m æ˜¯ æ ‘çš„æ ‡å·</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    tree[m].left = l;</span><br><span class="line">    tree[m].right = r;</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        tree[m].max = a[l];</span><br><span class="line">        tree[m].sum = a[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    build(m &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">    build(m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">    tree[m].max = max(tree[m &lt;&lt; <span class="number">1</span>].max, tree[m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].max);</span><br><span class="line">    tree[m].sum = tree[m &lt;&lt; <span class="number">1</span>].sum + tree[m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> a, <span class="keyword">int</span> val)</span><span class="comment">//a æ˜¯ èŠ‚ç‚¹ä½ç½®ï¼Œ val æ˜¯ æ›´æ–°çš„å€¼ï¼ˆåŠ å‡çš„å€¼ï¼‰</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (tree[m].left == a &amp;&amp; tree[m].right == a) {</span><br><span class="line">        tree[m].max += val;</span><br><span class="line">        tree[m].sum += val;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[m].left + tree[m].right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (a &lt;= mid) {</span><br><span class="line">        update(m &lt;&lt; <span class="number">1</span>, a, val);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        update(m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, a, val);</span><br><span class="line">    }</span><br><span class="line">    tree[m].max = max(tree[m &lt;&lt; <span class="number">1</span>].max, tree[m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].max);</span><br><span class="line">    tree[m].sum = tree[m &lt;&lt; <span class="number">1</span>].sum + tree[m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">querySum</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l == tree[m].left &amp;&amp; r == tree[m].right) {</span><br><span class="line">        <span class="keyword">return</span> tree[m].sum;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[m].left + tree[m].right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (r &lt;= mid) {</span><br><span class="line">        <span class="keyword">return</span> querySum(m &lt;&lt; <span class="number">1</span>, l, r);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (l &gt; mid) {</span><br><span class="line">        <span class="keyword">return</span> querySum(m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> querySum(m &lt;&lt; <span class="number">1</span>, l, mid) + querySum(m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">queryMax</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l == tree[m].left &amp;&amp; r == tree[m].right) {</span><br><span class="line">        <span class="keyword">return</span> tree[m].max;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[m].left + tree[m].right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (r &lt;= mid) {</span><br><span class="line">        <span class="keyword">return</span> queryMax(m &lt;&lt; <span class="number">1</span>, l, r);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (l &gt; mid) {</span><br><span class="line">        <span class="keyword">return</span> queryMax(m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> max(queryMax(m &lt;&lt; <span class="number">1</span>, l, mid), queryMax(m &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r));</span><br><span class="line">} </span><br><span class="line"></span><br><span class="line">build(<span class="number">1</span>, <span class="number">1</span>, n);  </span><br><span class="line">update(<span class="number">1</span>, a, b);  </span><br><span class="line">query(<span class="number">1</span>, a, b);</span><br></pre></td></tr></tbody></table></figure><h3 id="6-2-åŒºé—´æ›´æ–°"><a href="#6-2-åŒºé—´æ›´æ–°" class="headerlink" title="6.2. åŒºé—´æ›´æ–°"></a>6.2. åŒºé—´æ›´æ–°</h3><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t,n,q;  </span><br><span class="line">ll anssum;  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span>  </span><br><span class="line">    ll l, r;  </span><br><span class="line">    ll addv, sum;  </span><br><span class="line">}tree[maxn &lt;&lt; <span class="number">2</span>];  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">maintain</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{  </span><br><span class="line">    <span class="keyword">if</span>(tree[id].l &gt;= tree[id].r)  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    tree[id].sum = tree[id &lt;&lt; <span class="number">1</span>].sum + tree[id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{  </span><br><span class="line">    <span class="keyword">if</span>(tree[id].l &gt;= tree[id].r)  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    <span class="keyword">if</span>(tree[id].addv){  </span><br><span class="line">        <span class="keyword">int</span> tmp = tree[id].addv;  </span><br><span class="line">        tree[id &lt;&lt; <span class="number">1</span>].addv += tmp;  </span><br><span class="line">        tree[id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].addv += tmp;  </span><br><span class="line">        tree[id &lt;&lt; <span class="number">1</span>].sum += (tree[id &lt;&lt; <span class="number">1</span>].r - tree[id &lt;&lt; <span class="number">1</span>].l + <span class="number">1</span>) * tmp;  </span><br><span class="line">        tree[id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum += (tree[id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].r - tree[id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].l + <span class="number">1</span>) * tmp;  </span><br><span class="line">        tree[id].addv = <span class="number">0</span>;  </span><br><span class="line">    }  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> id, ll l, ll r)</span> </span>{  </span><br><span class="line">    tree[id].l = l;  </span><br><span class="line">    tree[id].r = r;  </span><br><span class="line">    tree[id].addv = <span class="number">0</span>;  </span><br><span class="line">    tree[id].sum = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">if</span>(l == r) {  </span><br><span class="line">        tree[id].sum = <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    }  </span><br><span class="line">    ll mid = (l + r) &gt;&gt; <span class="number">1</span>;  </span><br><span class="line">    build(id &lt;&lt; <span class="number">1</span>, l, mid);  </span><br><span class="line">    build(id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);  </span><br><span class="line">    maintain(id);  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">updateAdd</span><span class="params">(<span class="keyword">int</span> id,ll l,ll r,ll val)</span> </span>{  </span><br><span class="line">    <span class="keyword">if</span>(tree[id].l &gt;= l &amp;&amp; tree[id].r &lt;= r)  </span><br><span class="line">    {  </span><br><span class="line">        tree[id].addv += val;  </span><br><span class="line">        tree[id].sum += (tree[id].r - tree[id].l + <span class="number">1</span>) * val;  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    }  </span><br><span class="line">    pushdown(id);  </span><br><span class="line">    ll mid = (tree[id].l + tree[id].r) &gt;&gt; <span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid)  </span><br><span class="line">        updateAdd(id &lt;&lt; <span class="number">1</span>, l, r, val);  </span><br><span class="line">    <span class="keyword">if</span>(mid &lt; r)  </span><br><span class="line">        updateAdd(id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r, val);  </span><br><span class="line">    maintain(id);  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> id, ll l, ll r)</span> </span>{  </span><br><span class="line">    <span class="keyword">if</span>(tree[id].l &gt;= l &amp;&amp; tree[id].r &lt;= r){  </span><br><span class="line">        anssum += tree[id].sum;  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    }  </span><br><span class="line">    pushdown(id);  </span><br><span class="line">    ll mid = (tree[id].l + tree[id].r) &gt;&gt; <span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid)  </span><br><span class="line">        query(id &lt;&lt; <span class="number">1</span>, l, r);  </span><br><span class="line">    <span class="keyword">if</span>(mid &lt; r)  </span><br><span class="line">        query(id &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r);  </span><br><span class="line">    maintain(id);  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);  </span><br><span class="line">    <span class="keyword">int</span> kase = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">while</span>(t--) {  </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;q);  </span><br><span class="line">        build(<span class="number">1</span>, <span class="number">1</span>, n);  </span><br><span class="line">        <span class="keyword">int</span> id;  </span><br><span class="line">        ll x, y;  </span><br><span class="line">        ll val;  </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>, ++kase);  </span><br><span class="line">        <span class="keyword">while</span>(q--) {  </span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;id);  </span><br><span class="line">            <span class="keyword">if</span>(id == <span class="number">0</span>) {  </span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld %lld"</span>, &amp;x, &amp;y, &amp;val);  </span><br><span class="line">                updateAdd(<span class="number">1</span>, x + <span class="number">1</span>, y + <span class="number">1</span>, val);  </span><br><span class="line">            }  </span><br><span class="line">            <span class="keyword">else</span> {  </span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>, &amp;x, &amp;y);  </span><br><span class="line">                anssum = <span class="number">0</span>;  </span><br><span class="line">                query(<span class="number">1</span>, x + <span class="number">1</span>, y + <span class="number">1</span>);  </span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, anssum);  </span><br><span class="line">            } </span><br><span class="line">        } </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="7-æ ‘çŠ¶æ•°ç»„"><a href="#7-æ ‘çŠ¶æ•°ç»„" class="headerlink" title="7. æ ‘çŠ¶æ•°ç»„"></a>7. æ ‘çŠ¶æ•°ç»„</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50005</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> t)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> t &amp; (-t);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> t, <span class="keyword">int</span> d)</span> </span>{</span><br><span class="line">    <span class="keyword">while</span> (t &lt;= n){</span><br><span class="line">        a[t] += d;</span><br><span class="line">        t = t + lowbit(t);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> t)</span> </span>{</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (t &gt; <span class="number">0</span>){</span><br><span class="line">        sum += a[t];</span><br><span class="line">        t = t - lowbit(t);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> t, k, d;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">    k= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (t--){</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;d);</span><br><span class="line">            insert(i, d);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">string</span> str;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>, k++);</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; str) {</span><br><span class="line">            <span class="keyword">if</span> (str == <span class="string">"End"</span>)   <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">int</span> x, y;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;x, &amp;y);</span><br><span class="line">            <span class="keyword">if</span> (str == <span class="string">"Query"</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, getSum(y) - getSum(x - <span class="number">1</span>));</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (str == <span class="string">"Add"</span>)</span><br><span class="line">                insert(x, y);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (str == <span class="string">"Sub"</span>)</span><br><span class="line">                insert(x, -y);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ±‚é€†åºå¯¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">{</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a);</span><br><span class="line">node[i].index = i;</span><br><span class="line">node[i].v = a;</span><br><span class="line">}</span><br><span class="line">sort(node + <span class="number">1</span>, node + <span class="number">1</span> + n);</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">{ </span><br><span class="line">add(node[i].index);  <span class="comment">//ç¦»æ•£åŒ–ç»“æœâ€”â€” ä¸‹æ ‡ç­‰æ•ˆäºæ•°å€¼</span></span><br><span class="line">ans += i - sum(node[i].index); <span class="comment">//å¾—åˆ°ä¹‹å‰æœ‰å¤šå°‘ä¸ªæ¯”ä½ å¤§çš„æ•°ï¼ˆé€†åºå¯¹ï¼‰</span></span><br><span class="line">}</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ans;</span><br></pre></td></tr></tbody></table></figure><h2 id="8-ä¸­å›½å‰©ä½™å®šç†ï¼ˆå­™å­å®šç†ï¼‰"><a href="#8-ä¸­å›½å‰©ä½™å®šç†ï¼ˆå­™å­å®šç†ï¼‰" class="headerlink" title="8. ä¸­å›½å‰©ä½™å®šç†ï¼ˆå­™å­å®šç†ï¼‰"></a>8. ä¸­å›½å‰©ä½™å®šç†ï¼ˆå­™å­å®šç†ï¼‰</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CRT</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> m[], <span class="keyword">int</span> n)</span>  </span>{    </span><br><span class="line">    <span class="keyword">int</span> M = <span class="number">1</span>;    </span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)    </span><br><span class="line">        M *= m[i];    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)  {    </span><br><span class="line">        <span class="keyword">int</span> x, y;    </span><br><span class="line">        <span class="keyword">int</span> Mi = M / m[i];    </span><br><span class="line">        extend_Euclid(Mi, m[i], x, y);    </span><br><span class="line">        ans = (ans + Mi * x * a[i]) % M;    </span><br><span class="line">    }    </span><br><span class="line">    <span class="keyword">if</span>(ans &lt; <span class="number">0</span>) ans += M;    </span><br><span class="line">    <span class="keyword">return</span> ans;    </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">extend_Euclid</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> &amp;x, <span class="keyword">int</span> &amp;y)</span>  </span>{  </span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>) {  </span><br><span class="line">        x = <span class="number">1</span>;  </span><br><span class="line">        y = <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    }  </span><br><span class="line">    extend_Euclid(b, a % b, x, y);  </span><br><span class="line">    <span class="keyword">int</span> tmp = x;  </span><br><span class="line">    x = y;  </span><br><span class="line">    y = tmp - (a / b) * y;  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="9-æœ€å¤§æµ-æœ€å¤§æƒé—­åˆå­å›¾"><a href="#9-æœ€å¤§æµ-æœ€å¤§æƒé—­åˆå­å›¾" class="headerlink" title="9. æœ€å¤§æµ/æœ€å¤§æƒé—­åˆå­å›¾"></a>9. æœ€å¤§æµ/æœ€å¤§æƒé—­åˆå­å›¾</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»æºç‚¹så‘æ¯ä¸ªæ­£æƒç‚¹è¿ä¸€æ¡å®¹é‡ä¸ºæƒå€¼çš„è¾¹ï¼Œæ¯ä¸ªè´Ÿæƒç‚¹å‘æ±‡ç‚¹tè¿ä¸€æ¡å®¹é‡ä¸ºæƒå€¼çš„ç»å¯¹å€¼çš„è¾¹ï¼Œæœ‰å‘å›¾åŸæ¥çš„è¾¹å®¹é‡å…¨éƒ¨ä¸ºæ— é™å¤§ã€‚</span></span><br><span class="line"><span class="comment">//æœ€å¤§æƒé—­åˆå­å›¾=ï¼ˆæ­£æƒä¹‹å’Œ-ä¸é€‰çš„æ­£æƒä¹‹å’Œ-è¦é€‰çš„è´Ÿæƒç»å¯¹å€¼ä¹‹å’Œï¼‰=æ­£æƒå€¼å’Œ-æœ€å°å‰²/æœ€å¤§æµ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 5010     <span class="comment">//è¯¾ç¨‹</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxm 50100    <span class="comment">//ç”¨æˆ·</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> {</span>  </span><br><span class="line">    <span class="keyword">int</span> v, c, next;  </span><br><span class="line">    Edge(<span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> next): v(v), c(c), next(next) {}  </span><br><span class="line">    Edge(){}  </span><br><span class="line">}e[maxm * <span class="number">6</span> + maxn * <span class="number">2</span>];  </span><br><span class="line"><span class="keyword">int</span> p[maxn + maxm];  </span><br><span class="line"><span class="keyword">int</span> cnt, n, m, T;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{  </span><br><span class="line">    cnt = <span class="number">0</span>;  </span><br><span class="line">    <span class="built_in">memset</span>(p, <span class="number">-1</span>, <span class="keyword">sizeof</span>(p));  </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span> </span>{  </span><br><span class="line">    e[cnt] = Edge(v, c, p[u]);  </span><br><span class="line">    p[u] = cnt++;  <span class="comment">// é¡¶ç‚¹uçš„ä¸Šä¸€æ¡ç›¸é‚»çš„è¾¹ </span></span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> d[maxn + maxm];  </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">-1</span>, <span class="keyword">sizeof</span>(d));  </span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;  </span><br><span class="line">    d[<span class="number">0</span>] = <span class="number">0</span>;  </span><br><span class="line">    q.push(<span class="number">0</span>);  </span><br><span class="line">    <span class="keyword">while</span>(!q.empty()) {  </span><br><span class="line">        <span class="keyword">int</span> u = q.front();</span><br><span class="line">        q.pop();  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = p[u]; i != <span class="number">-1</span>; i = e[i].next) {  </span><br><span class="line">            <span class="keyword">int</span> v = e[i].v;  </span><br><span class="line">            <span class="keyword">if</span>(e[i].c &gt; <span class="number">0</span> &amp;&amp; d[v] == <span class="number">-1</span>){  </span><br><span class="line">                <span class="comment">//printf("%d-&gt;%d(%d)\n", u, v, d[u] + 1);  </span></span><br><span class="line">                d[v] = d[u] + <span class="number">1</span>;  </span><br><span class="line">                q.push(v);  </span><br><span class="line">            }  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> d[T] != <span class="number">-1</span>;  </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> flow)</span></span>{  </span><br><span class="line">    <span class="keyword">if</span>(u == T)</span><br><span class="line">        <span class="keyword">return</span> flow;  </span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = p[u]; i != <span class="number">-1</span>; i = e[i].next){  </span><br><span class="line">        <span class="keyword">int</span> v = e[i].v;  </span><br><span class="line">        <span class="keyword">if</span>(e[i].c &gt; <span class="number">0</span> &amp;&amp; d[v] == d[u] + <span class="number">1</span>){  </span><br><span class="line">            <span class="keyword">int</span> tmp = dfs(v, min(flow, e[i].c));  </span><br><span class="line">            e[i].c -= tmp;  </span><br><span class="line">            flow -= tmp;  </span><br><span class="line">            e[i^<span class="number">1</span>].c += tmp;  </span><br><span class="line">            res += tmp;  </span><br><span class="line">            <span class="keyword">if</span>(flow == <span class="number">0</span>)  </span><br><span class="line">                <span class="keyword">break</span>;  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">if</span>(res == <span class="number">0</span>)  </span><br><span class="line">        d[u] = <span class="number">-1</span>;  </span><br><span class="line">    <span class="keyword">return</span> res;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">while</span>(bfs()){  </span><br><span class="line">   <span class="comment">// printf("here!\n");  </span></span><br><span class="line">        res += dfs(<span class="number">0</span>, inf);  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">return</span> res;  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{  </span><br><span class="line">    init();  </span><br><span class="line">    <span class="keyword">int</span> p, a, b, c, sum = <span class="number">0</span>;  </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);  </span><br><span class="line">    T = n + m + <span class="number">1</span>;<span class="comment">//æ±‡ç‚¹  </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++){  </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p);  </span><br><span class="line">        insert(i + m, T, p);  <span class="comment">//è¯¾ç¨‹æ”¾å³è¾¹</span></span><br><span class="line">        insert(T, i + m, <span class="number">0</span>);  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++){  </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);  </span><br><span class="line">        sum += c;  </span><br><span class="line">        insert(i, a + m, inf);   </span><br><span class="line">        insert(a + m, i, <span class="number">0</span>);  </span><br><span class="line">        insert(i, b + m, inf);  </span><br><span class="line">        insert(b + m, i, <span class="number">0</span>);  </span><br><span class="line">        insert(<span class="number">0</span>, i, c);   <span class="comment">//ç”¨æˆ·æ”¾å·¦è¾¹</span></span><br><span class="line">        insert(i, <span class="number">0</span>, <span class="number">0</span>);  </span><br><span class="line">    }  </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum - dinic());  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="10-æ‹“æ‰‘æ’åº-AOEç½‘ç»œ-å…³é”®è·¯å¾„"><a href="#10-æ‹“æ‰‘æ’åº-AOEç½‘ç»œ-å…³é”®è·¯å¾„" class="headerlink" title="10. æ‹“æ‰‘æ’åº/AOEç½‘ç»œ/å…³é”®è·¯å¾„"></a>10. æ‹“æ‰‘æ’åº/AOEç½‘ç»œ/å…³é”®è·¯å¾„</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e4</span>;</span><br><span class="line"><span class="keyword">int</span> N,M;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line"><span class="comment">//vector&lt;int&gt; child;</span></span><br><span class="line"><span class="keyword">int</span> id; </span><br><span class="line"><span class="keyword">int</span> length;</span><br><span class="line">};</span><br><span class="line"><span class="comment">//Node graph[maxn]; </span></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; Adj[maxn];</span><br><span class="line"><span class="comment">//int e[maxn]; //è¾¹ä¸Šæ´»åŠ¨æœ€æ—©å¼€å§‹æ—¶é—´ </span></span><br><span class="line"><span class="comment">//int l[maxn]; //è¾¹ä¸Šæ´»åŠ¨æœ€æ™šå¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">int</span> ve[maxn];   <span class="comment">//é¡¶ç‚¹ä¸Šæ´»åŠ¨æœ€æ—©å¼€å§‹æ—¶é—´ </span></span><br><span class="line"><span class="keyword">int</span> vl[maxn];  <span class="comment">//é¡¶ç‚¹ä¸Šæ´»åŠ¨æœ€æ™šå¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">int</span> in[maxn];  <span class="comment">// æ¯ä¸ªç»“ç‚¹çš„å…¥åº¦ï¼Œä¸º0æ—¶å…¥é˜Ÿ</span></span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">TopologicalSort</span><span class="params">(<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="built_in">memset</span>(ve, <span class="number">0</span>, <span class="keyword">sizeof</span>(ve));</span><br><span class="line"><span class="comment">//memset(inq,0,sizeof(inq));</span></span><br><span class="line"><span class="comment">/*å…ˆæ‰¾å‡ºæ‰€æœ‰åˆå§‹æ—¶å…¥åº¦ä¸º0çš„ç»“ç‚¹*/</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)  </span><br><span class="line">{</span><br><span class="line"><span class="keyword">if</span>(in[i] == <span class="number">0</span>)</span><br><span class="line">{</span><br><span class="line">q.push(i);</span><br><span class="line"><span class="comment">//s.push(i);</span></span><br><span class="line"><span class="comment">//inq[i] = true;</span></span><br><span class="line"><span class="comment">//ve[i] = 0; </span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*æ¯æ¬¡å°†æ‰€æœ‰å…¥åº¦ä¸º0çš„ç»“ç‚¹å…¥æ ˆï¼Œæ‹“æ‰‘åº*/</span></span><br><span class="line"><span class="keyword">while</span>(!q.empty())</span><br><span class="line">{</span><br><span class="line"><span class="keyword">int</span> tmp = q.front();</span><br><span class="line">q.pop();    </span><br><span class="line">s.push(tmp); <span class="comment">// num++ï¼›</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; "tmp:" &lt;&lt; tmp &lt;&lt; endl;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Adj[tmp].size(); i++)</span><br><span class="line">{</span><br><span class="line"><span class="keyword">int</span> id = Adj[tmp][i].id;</span><br><span class="line"><span class="keyword">if</span>(--in[id] == <span class="number">0</span>) <span class="comment">//å…¥åº¦å‡ä¸º0 åŠ å…¥æ‹“æ‰‘æ’åº </span></span><br><span class="line">{</span><br><span class="line">q.push(id);</span><br><span class="line"><span class="comment">//s.push(i);</span></span><br><span class="line"><span class="comment">//inq[i]=true;</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(ve[tmp] + Adj[tmp][i].length &gt; ve[id]) <span class="comment">//æ›´æ–°veå€¼ </span></span><br><span class="line">ve[id] = ve[tmp] + Adj[tmp][i].length;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"> } </span><br><span class="line"> <span class="comment">//cout &lt;&lt; "size: " &lt;&lt; s.size() &lt;&lt; endl;</span></span><br><span class="line"> <span class="keyword">if</span>(s.size() == N) </span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"> <span class="keyword">else</span> </span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">calc_path</span><span class="params">(<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">if</span>(TopologicalSort(N) == <span class="literal">false</span>)</span><br><span class="line">{</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"> <span class="comment">/*å¯»æ‰¾æ‹“æ‰‘åºåˆ—æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œå³å¼€å§‹æ—¶é—´æœ€æ™šçš„ä¸€ä¸ªç»“ç‚¹*/</span></span><br><span class="line"> <span class="keyword">int</span> max = <span class="number">-1</span>, u = <span class="number">-1</span>;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">if</span>(ve[i] &gt; max)</span><br><span class="line">   {</span><br><span class="line">    max = ve[i];</span><br><span class="line">    u = i;</span><br><span class="line">   } </span><br><span class="line"> }</span><br><span class="line">  <span class="comment">//fill(vl, vl + maxn, INF); </span></span><br><span class="line">  <span class="comment">//vl[u] = ve[u];</span></span><br><span class="line">  fill(vl, vl + maxn, ve[u]); </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ve[u]);</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/*å…ƒç´ é€ä¸ªå‡ºæ ˆï¼Œå³ä¸ºé€†æ‹“æ‰‘åºåˆ—ï¼Œæ„é€ vlæ•°ç»„*/</span></span><br><span class="line"> <span class="keyword">while</span>(!s.empty())</span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">int</span> tmp = s.top();</span><br><span class="line"> s.pop();</span><br><span class="line"> <span class="comment">//int min = INF, u;</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Adj[tmp].size(); i++)</span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">int</span> id = Adj[tmp][i].id;</span><br><span class="line"> <span class="keyword">if</span>(vl[id] - Adj[tmp][i].length &lt; vl[tmp])</span><br><span class="line"> {</span><br><span class="line"> vl[tmp] = vl[id] - Adj[tmp][i].length;</span><br><span class="line"> }</span><br><span class="line"> }</span><br><span class="line"> }</span><br><span class="line"> <span class="comment">/*éå†é‚»æ¥ç‚¹æ¯æ¡è¾¹ï¼Œè®¡ç®—æ¯é¡¹æ´»åŠ¨çš„æœ€æ—©å’Œæœ€æ™šå¼€å§‹æ—¶é—´*/</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> j = Adj[i].size() - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">int</span> id = Adj[i][j].id;</span><br><span class="line"> <span class="keyword">int</span> e = ve[i];</span><br><span class="line"> <span class="keyword">int</span> l = vl[id]-Adj[i][j].length;</span><br><span class="line"> <span class="keyword">if</span>(e == l) </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d-&gt;%d\n"</span>, i, id); </span><br><span class="line"> }</span><br><span class="line"> }</span><br><span class="line"> } </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;N, &amp;M) != EOF)</span><br><span class="line">{</span><br><span class="line"><span class="keyword">int</span> v, w, len;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">Adj[i].clear();</span><br><span class="line"><span class="built_in">memset</span>(in, <span class="number">0</span>, <span class="keyword">sizeof</span>(in));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">{</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;v, &amp;w, &amp;len);</span><br><span class="line">Node tmp;</span><br><span class="line">tmp.id = w;</span><br><span class="line">tmp.length = len;</span><br><span class="line">Adj[v].push_back(tmp); <span class="comment">//æœ‰å‘å›¾åªè¦æ·»åŠ å•å‘è¾¹å³å¯ </span></span><br><span class="line">in[w]++; </span><br><span class="line">}</span><br><span class="line"><span class="keyword">while</span>(!s.empty())</span><br><span class="line">s.pop();</span><br><span class="line">calc_path(N);</span><br><span class="line"><span class="comment">//cout &lt;&lt; "end!!" &lt;&lt; endl;</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="11-å¼ºè¿é€šåˆ†é‡"><a href="#11-å¼ºè¿é€šåˆ†é‡" class="headerlink" title="11. å¼ºè¿é€šåˆ†é‡"></a>11. å¼ºè¿é€šåˆ†é‡</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">data</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">int</span> to, next;</span><br><span class="line">} tu[N * <span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> head[N];</span><br><span class="line"><span class="keyword">int</span> ip;</span><br><span class="line"><span class="keyword">int</span> dfn[N], low[N];<span class="comment">///dfn[]è¡¨ç¤ºæ·±æœçš„æ­¥æ•°ï¼Œlow[u]è¡¨ç¤ºuæˆ–uçš„å­æ ‘èƒ½å¤Ÿè¿½æº¯åˆ°çš„æœ€æ—©çš„æ ˆä¸­èŠ‚ç‚¹çš„æ¬¡åºå·</span></span><br><span class="line"><span class="keyword">int</span> sccno[N];<span class="comment">///ç¼©ç‚¹æ•°ç»„ï¼Œè¡¨ç¤ºæŸä¸ªç‚¹å¯¹åº”çš„ç¼©ç‚¹å€¼</span></span><br><span class="line"><span class="keyword">int</span> step;</span><br><span class="line"><span class="keyword">int</span> scc_cnt;<span class="comment">///å¼ºè¿é€šåˆ†é‡ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ip=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    tu[ip].to = v;</span><br><span class="line">    tu[ip].next = head[u];</span><br><span class="line">    head[u] = ip++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; scc[N];<span class="comment">///å¾—å‡ºæ¥çš„ç¼©ç‚¹ï¼Œscc[i]é‡Œé¢å­˜iè¿™ä¸ªç¼©ç‚¹å…·ä½“ç¼©äº†å“ªäº›ç‚¹</span></span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; S;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    dfn[u] = low[u] = ++step;</span><br><span class="line">    S.push(u);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = head[u]; i != <span class="number">-1</span>; i = tu[i].next)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">int</span> v = tu[i].to;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v])</span><br><span class="line">        {</span><br><span class="line">            dfs(v);</span><br><span class="line">            low[u] = min(low[u], low[v]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!sccno[v])</span><br><span class="line">            low[u] = min(low[u], dfn[v]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (low[u] == dfn[u])</span><br><span class="line">    {</span><br><span class="line">        scc_cnt += <span class="number">1</span>;</span><br><span class="line">        scc[scc_cnt].clear();</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">int</span> x = S.top();</span><br><span class="line">            S.pop();</span><br><span class="line">            <span class="keyword">if</span> (sccno[x] != scc_cnt) </span><br><span class="line">scc[scc_cnt].push_back(x);</span><br><span class="line">            sccno[x] = scc_cnt;</span><br><span class="line">            <span class="keyword">if</span> (x == u) </span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(sccno, <span class="number">0</span>, <span class="keyword">sizeof</span>(sccno));</span><br><span class="line">    <span class="built_in">memset</span>(dfn, <span class="number">0</span>, <span class="keyword">sizeof</span>(dfn));</span><br><span class="line">    step = scc_cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!dfn[i]) </span><br><span class="line">dfs(i);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="12-æ—¥æœŸä¸æ˜ŸæœŸ-è”¡å‹’å…¬å¼"><a href="#12-æ—¥æœŸä¸æ˜ŸæœŸ-è”¡å‹’å…¬å¼" class="headerlink" title="12. æ—¥æœŸä¸æ˜ŸæœŸ/è”¡å‹’å…¬å¼"></a>12. æ—¥æœŸä¸æ˜ŸæœŸ/è”¡å‹’å…¬å¼</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getDayofWeek</span><span class="params">(<span class="keyword">int</span> y, <span class="keyword">int</span> m, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(m == <span class="number">1</span> || m == <span class="number">2</span>) {</span><br><span class="line">        m += <span class="number">12</span>;</span><br><span class="line">        y--;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> (d + <span class="number">2</span> * m + <span class="number">3</span> * (m + <span class="number">1</span>) / <span class="number">5</span> + y + y / <span class="number">4</span> - y / <span class="number">100</span> + y / <span class="number">400</span> + <span class="number">1</span>) % <span class="number">7</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><p><a href="https://blog.csdn.net/qq_32265245/article/details/53046750" target="_blank" rel="noopener">ACMç®—æ³•æ¨¡æ¿</a></p></li><li><p><a href="https://blog.csdn.net/m0_38033475/article/details/80173037" target="_blank" rel="noopener">dinicæ±‚æœ€å¤§æƒé—­åˆå­å›¾</a></p></li><li><p><a href="https://blog.csdn.net/weixin_42584977/article/details/92001428" target="_blank" rel="noopener">æ‹“æ‰‘æ’åº+AOEç½‘ç»œ+å…³é”®è·¯å¾„</a></p></li><li><p><a href="https://blog.csdn.net/martinue/article/details/51315574" target="_blank" rel="noopener">tarjanæ¨¡æ¿</a></p></li><li><p><a href="https://zh.wikipedia.org/wiki/%E8%94%A1%E5%8B%92%E5%85%AC%E5%BC%8F" target="_blank" rel="noopener">è”¡å‹’å…¬å¼</a></p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ç¨‹åºè®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¿ç ” </tag>
            
            <tag> æœºè¯• </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»ˆäºå¼„å¥½åšå®¢å•¦</title>
      <link href="/first-article/"/>
      <url>/first-article/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨åä¸€è¿™ä¸€å¤©ï¼Œæ–­æ–­ç»­ç»­åœ°ç»ˆäºæŠŠåšå®¢å»ºå¥½äº†ï¼Œæ„Ÿè°¢è¿™ä½dalaoçš„æ•™ç¨‹<a href="https://zhuanlan.zhihu.com/p/35668237" target="_blank" rel="noopener">è¶…è¯¦ç»†Hexo+Githubåšå®¢æ­å»ºå°ç™½æ•™ç¨‹</a>!</p></blockquote><p>å…¶å®å¼„ä¸ªåšå®¢çš„åˆè¡·è¿˜æ˜¯è‡ªå·±æƒ³å¹³æ—¶å†™ç‚¹ä¸œè¥¿ï¼Œæˆ–è€…æ˜¯è®°å½•ä¸€äº›ç»å†æˆ–è€…æ„Ÿæ‚Ÿï¼Œåˆæˆ–æ˜¯å¹³æ—¶å·¥ä½œå­¦ä¹ æ—¶è®°å½•ä¸€äº›ä¸œè¥¿ã€‚</p><p>ä¸è¿‡ç›®å‰æ°´å¹³æœ‰é™ï¼Œå¯èƒ½æŠ€æœ¯ä¸Šçš„ä¸œè¥¿æ¯”é‡è¿˜æ˜¯ä¼šåå°‘ä¸€äº›ã€‚ä½†ä¸ç®¡å†™äº›ä»€ä¹ˆï¼Œé‡è¦çš„è¿˜æ˜¯è‡ªå·±è¦å¼€å§‹åšæŒå†™ç‚¹ä¸œè¥¿ã€‚</p><p>æ¥ä¸‹æ¥é¦–å…ˆæƒ³å†™çš„ï¼Œä¸€ä¸ªæ˜¯ä¿ç ”æ–¹é¢çš„ä¸€äº›ç»å†æ„Ÿæ‚Ÿï¼Œå†ä¸€ä¸ªå¯èƒ½å°±æ˜¯å¹³æ—¶çœ‹è®ºæ–‡å†™ä»£ç æ—¶åšçš„ä¸€äº›ç¬”è®°ï¼Œä¹Ÿä¸ç«‹ä»€ä¹ˆflagäº†ï¼Œå°±å¸Œæœ›è¿™ä¸ªåšå®¢èƒ½ä¸€ç›´æ›´æ–°ä¸‹å»å§ã€‚<br>s<br>æœ€åè¿˜æ˜¯ç¥ç¥–å›½æ¯äº²70å²ç”Ÿæ—¥å¿«ä¹å‘€ï¼ğŸ˜€</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/hello-world/"/>
      <url>/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> hexo new "My New Post"</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
